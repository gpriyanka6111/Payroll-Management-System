(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[56],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>i,r:()=>d});var r=a(5155),s=a(2115),l=a(9708),n=a(2085),o=a(9434);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:i=!1,...c}=e,u=i?l.DX:"button";return(0,r.jsx)(u,{className:(0,o.cn)(d({variant:s,size:n,className:a})),ref:t,...c})});i.displayName="Button"},1440:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>J});var r=a(5155),s=a(2115),l=a(5695),n=a(831),o=a(1784),d=a(6874),i=a.n(d),c=a(221),u=a(2177),m=a(5594),h=a(285),p=a(7759),f=a(2523),x=a(6695),y=a(7481),j=a(8376),v=a(3422),g=a(172);let b=(0,a(157).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var N=a(4063),w=a(1949),A=a(9119),k=a(5127),H=a(9100),S=a(5365),M=a(9434),R=a(9208),C=a(4636),I=a(8539),P=a(7600),T=a(5317),E=a(6104),O=a(8856),D=a(5057);let F=m.z.object({employeeId:m.z.string(),name:m.z.string(),payMethod:m.z.enum(["Hourly","Salaried"]),payRateCheck:m.z.number().optional(),payRateOthers:m.z.coerce.number().min(0).optional(),biWeeklySalary:m.z.number().optional(),totalHoursWorked:m.z.coerce.number().min(0,{message:"Hours must be non-negative."}).default(0),checkHours:m.z.coerce.number().min(0,{message:"Hours must be non-negative."}).default(0),otherHours:m.z.coerce.number().min(0).default(0),ptoUsed:m.z.coerce.number().min(0,{message:"PTO hours must be non-negative."}).default(0),ptoBalance:m.z.number().optional(),standardCheckHours:m.z.number().optional(),comment:m.z.string().optional()}).refine(e=>"Hourly"!==e.payMethod||e.checkHours<=e.totalHoursWorked,{message:"Check hours cannot exceed total hours.",path:["checkHours"]}).refine(e=>{var t;return e.ptoUsed<=(null!=(t=e.ptoBalance)?t:0)},{message:"PTO used cannot exceed available balance.",path:["ptoUsed"]}),_=m.z.object({employees:m.z.array(F)}),z=[{key:"totalHoursWorked",label:"Total Hours Worked",props:{step:"0.1",min:"0"}},{key:"checkHours",label:"Check Hours",props:{step:"0.1",min:"0"}},{key:"otherHours",label:"Other Hours",props:{readOnly:!0,className:"bg-muted/50"}},{key:"ptoUsed",label:"PTO Used",props:{step:"0.1",min:"0"}}];function B(e){let{from:t,to:a,payrollId:n,initialPayrollData:d}=e,i=(0,l.useRouter)(),{toast:m}=(0,y.dj)(),{user:F}=(0,P.A)(),[B,L]=s.useState(!0),[W,U]=s.useState(!1),[G,V]=s.useState(!1),[J,Z]=s.useState([]),[$,X]=s.useState(!1),[Y,q]=s.useState("My Small Business"),[Q,K]=s.useState(""),[ee,et]=s.useState(""),[ea,er]=s.useState(""),[es,el]=s.useState(""),en=!!n,eo=(0,u.mN)({resolver:(0,c.u)(_),defaultValues:{employees:[]},mode:"onChange"}),{fields:ed}=(0,u.jz)({control:eo.control,name:"employees"}),{setValue:ei,watch:ec,control:eu,reset:em,getValues:eh}=eo,ep=ec("employees"),ef=s.useCallback(async e=>{if(!F||!e||0===e.length)return;U(!0),m({title:"Fetching Hours",description:"Calculating worked hours from time entries..."});let r=new Date(a);r.setHours(23,59,59,999);try{let a=e.map((e,t)=>({...e,index:t})).filter(e=>"Hourly"===e.payMethod);if(0===a.length){m({title:"No Hourly Employees",description:"Skipping hour fetch.",variant:"default"}),U(!1);return}await Promise.all(a.map(async e=>{var a;let s=0,l=(0,T.rJ)(E.db,"users",F.uid,"employees",e.employeeId,"timeEntries"),n=(0,T.P)(l,(0,T._M)("timeIn",">=",t),(0,T._M)("timeIn","<=",r));(await (0,T.GG)(n)).forEach(e=>{let t=e.data();if(t.timeOut){let e=(0,R.o)(t.timeOut.toDate(),t.timeIn.toDate());s+=e>0?e:0}});let o=s/60,d=parseFloat(o.toFixed(1)),i=null!=(a=e.standardCheckHours)?a:0,c=Math.min(d,i),u=Math.max(0,d-i);ei("employees.".concat(e.index,".totalHoursWorked"),d,{shouldValidate:!0,shouldDirty:!0}),ei("employees.".concat(e.index,".checkHours"),parseFloat(c.toFixed(1)),{shouldValidate:!0,shouldDirty:!0}),ei("employees.".concat(e.index,".otherHours"),parseFloat(u.toFixed(1)),{shouldValidate:!0,shouldDirty:!0})})),m({title:"Hours Fetched",description:"Total hours for hourly employees have been updated.",variant:"default"})}catch(e){console.error("Error fetching hours:",e),m({title:"Error",description:"Could not fetch hours from time entries.",variant:"destructive"})}finally{U(!1)}},[F,t,a,ei,m]);s.useEffect(()=>{F&&(async()=>{L(!0);try{let e,t=(0,T.H9)(E.db,"users",F.uid),a=await (0,T.x7)(t);a.exists()&&q(a.data().companyName||"My Small Business");let r=(0,T.rJ)(E.db,"users",F.uid,"employees"),s=(0,T.P)(r,(0,T.My)("firstName","asc")),l=(await (0,T.GG)(s)).docs.map(e=>({id:e.id,...e.data()}));if(en&&d){e=d.inputs.map(e=>{let t=l.find(t=>t.id===e.employeeId);return{...e,ptoBalance:t?t.ptoBalance:e.ptoBalance,comment:t?t.comment:e.comment}}),K(d.summaryEmployer||""),et(d.summaryEmployee||""),er(d.summaryDeductions||""),el(d.summaryNetPay||"");let t=new Set(d.inputs.map(e=>e.employeeId));l.filter(e=>!t.has(e.id)).forEach(t=>{var a,r,s;e.push({employeeId:t.id,name:"".concat(t.firstName),payMethod:t.payMethod,payRateCheck:t.payRateCheck,payRateOthers:null!=(a=t.payRateOthers)?a:0,biWeeklySalary:null!=(r=t.biWeeklySalary)?r:0,ptoBalance:t.ptoBalance,standardCheckHours:null!=(s=t.standardCheckHours)?s:0,totalHoursWorked:0,checkHours:0,otherHours:0,ptoUsed:0,comment:t.comment||""})}),em({employees:e})}else e=l.map(e=>{var t,a,r;return{employeeId:e.id,name:"".concat(e.firstName),payMethod:e.payMethod,payRateCheck:e.payRateCheck,payRateOthers:null!=(t=e.payRateOthers)?t:0,biWeeklySalary:null!=(a=e.biWeeklySalary)?a:0,ptoBalance:e.ptoBalance,standardCheckHours:null!=(r=e.standardCheckHours)?r:0,totalHoursWorked:0,checkHours:0,otherHours:0,ptoUsed:0,comment:e.comment||""}}),em({employees:e}),e.length>0&&await ef(e)}catch(e){console.error("Error fetching payroll data:",e),m({title:"Error",description:"Failed to load initial payroll data.",variant:"destructive"})}finally{L(!1)}})()},[F,n,d,t,a]),s.useEffect(()=>{let e=ec((e,t)=>{let{name:a}=t;if(a&&(a.endsWith(".totalHoursWorked")||a.endsWith(".checkHours"))){let t=a.match(/^employees\.(\d+)\./);if(t){var r;let a=parseInt(t[1],10),s=null==(r=e.employees)?void 0:r[a];if(s&&"Hourly"===s.payMethod){let e=Math.max(0,(Number(s.totalHoursWorked)||0)-(Number(s.checkHours)||0));ei("employees.".concat(a,".otherHours"),e,{shouldValidate:!0})}}}});return()=>e.unsubscribe()},[ec,ei]);let ex=e=>{let t=Number(e);return isNaN(t)?0:t},ey=(e,t)=>{let a=parseFloat(t);Z(t=>t.map(t=>{if(t.employeeId===e&&"Hourly"===t.payMethod){let e=isNaN(a)?0:a,r=t.payRateOthers*t.otherHours;return{...t,otherAdjustment:e,grossOtherAmount:r+e}}return t}))};async function ej(){if(!F)return void m({title:"Not Authenticated",variant:"destructive"});V(!0);let e=eo.getValues().employees;try{let r=J.reduce((e,t)=>e+t.grossCheckAmount+t.grossOtherAmount,0),s={fromDate:(0,o.GP)(t,"yyyy-MM-dd"),toDate:(0,o.GP)(a,"yyyy-MM-dd"),totalAmount:r,status:"Completed",results:J,inputs:e,summaryEmployer:Q,summaryEmployee:ee,summaryDeductions:ea,summaryNetPay:es},l=n;if(en&&n){let e=(0,T.H9)(E.db,"users",F.uid,"payrolls",n);await (0,T.mZ)(e,s)}else{let e=(0,T.rJ)(E.db,"users",F.uid,"payrolls");l=(await (0,T.gS)(e,s)).id}let d=(0,T.wP)(E.db);J.forEach(e=>{let t=(0,T.H9)(E.db,"users",F.uid,"employees",e.employeeId);d.update(t,{ptoBalance:e.newPtoBalance})}),await d.commit(),localStorage.setItem("lastPayrollEndDate",a.toISOString()),localStorage.removeItem("timesheetDateRange"),m({title:"Payroll ".concat(en?"Updated":"Approved"),description:"Payroll history saved and PTO balances updated. Redirecting to report..."}),i.push("/dashboard/payroll/report?id=".concat(l))}catch(e){console.error("Failed to approve payroll:",e),m({title:"Error ".concat(en?"Updating":"Approving"," Payroll"),description:"Could not save this payroll run. Please try again.",variant:"destructive"})}finally{V(!1)}}let ev=e=>"number"!=typeof e||isNaN(e)?"$ ---.--":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),eg=e=>{let t=Number(e);return null==e||isNaN(t)?"0.00":t.toFixed(2)};return B?(0,r.jsxs)(x.Zp,{children:[(0,r.jsxs)(x.aR,{children:[(0,r.jsxs)(x.ZB,{className:"flex items-center",children:[(0,r.jsx)(v.A,{className:"mr-2 h-5 w-5 text-muted-foreground"})," 2. Calculate Payroll"]}),(0,r.jsx)(x.BT,{children:"Loading employee data..."})]}),(0,r.jsx)(x.Wu,{className:"py-10",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(O.E,{className:"h-10 w-full"}),(0,r.jsx)(O.E,{className:"h-10 w-full"}),(0,r.jsx)(O.E,{className:"h-10 w-full"})]})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.Zp,{children:[(0,r.jsxs)(x.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(x.ZB,{className:"flex items-center",children:[(0,r.jsx)(v.A,{className:"mr-2 h-5 w-5 text-muted-foreground"})," 2. Calculate Payroll"]}),(0,r.jsx)(x.BT,{children:"Enter hours and review comments for each employee for the current pay period."})]}),!en&&(0,r.jsxs)(h.$,{variant:"outline",onClick:()=>ef(eh().employees),disabled:W,children:[W?(0,r.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(b,{className:"mr-2 h-4 w-4"}),"Fetch Hours"]})]}),(0,r.jsx)(x.Wu,{children:(0,r.jsx)(p.lV,{...eo,children:(0,r.jsxs)("form",{onSubmit:eo.handleSubmit(function(e){Z(e.employees.map(e=>{let t,a,r=ex(e.ptoUsed),s=ex(e.ptoBalance);if(en&&d){let a=d.inputs.find(t=>t.employeeId===e.employeeId);t=s+(a?ex(a.ptoUsed):0)-r}else t=s-r;if("Salaried"===e.payMethod){let t=ex(e.biWeeklySalary);a={employeeId:e.employeeId,name:e.name,payMethod:e.payMethod,totalHoursWorked:0,checkHours:0,otherHours:0,ptoUsed:r,payRateCheck:0,payRateOthers:0,biWeeklySalary:t,otherAdjustment:0,grossCheckAmount:t,grossOtherAmount:0}}else{var l;let t=ex(e.totalHoursWorked),s=ex(e.checkHours),n=ex(e.otherHours),o=ex(e.payRateCheck),d=null!=(l=ex(e.payRateOthers))?l:0;a={employeeId:e.employeeId,name:e.name,payMethod:e.payMethod,totalHoursWorked:t,checkHours:s,otherHours:n,ptoUsed:r,payRateCheck:o,payRateOthers:d,biWeeklySalary:0,otherAdjustment:0,grossCheckAmount:o*s+o*r,grossOtherAmount:d*n+0}}return{...a,newPtoBalance:t}})),X(!0),m({title:"Payroll Calculated",description:"Review the results below. Finalize by approving.",variant:"default",action:(0,r.jsx)(j.A,{className:"h-4 w-4 text-white"})})}),className:"space-y-6",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(k.XI,{children:[(0,r.jsx)(k.A0,{children:(0,r.jsxs)(k.Hj,{children:[(0,r.jsx)(k.nd,{className:"font-bold min-w-[200px]",children:"Metric"}),ed.map(e=>(0,r.jsx)(k.nd,{className:"text-left",children:e.name},e.id))]})}),(0,r.jsxs)(k.BF,{children:[z.map(e=>(0,r.jsxs)(k.Hj,{children:[(0,r.jsx)(k.nA,{className:"font-medium",children:e.label}),ed.map((t,a)=>{var s;let l=(null==(s=ep[a])?void 0:s.payMethod)==="Salaried";return(0,r.jsx)(k.nA,{className:"text-left p-2",children:(0,r.jsx)(p.zB,{control:eo.control,name:"employees.".concat(a,".").concat(e.key),render:a=>{let{field:s}=a;return(0,r.jsxs)(p.eI,{children:[(0,r.jsxs)(p.lR,{className:"sr-only",children:[e.label," for ",t.name]}),(0,r.jsx)(p.MJ,{children:(0,r.jsx)(f.p,{type:"number",placeholder:"0",...s,...e.props,className:(0,M.cn)("h-8 w-28 text-left",l&&"bg-muted/50"),disabled:l})}),(0,r.jsx)(p.C5,{className:"text-xs mt-1"})]})}})},t.id)})]},e.key)),(0,r.jsxs)(k.Hj,{className:"bg-muted/20 hover:bg-muted/20",children:[(0,r.jsx)(k.nA,{className:"font-medium",children:"Available PTO"}),ed.map((e,t)=>{var a;return(0,r.jsxs)(k.nA,{className:"text-left pl-4 text-sm text-muted-foreground tabular-nums",children:["(",eg(null==(a=ep[t])?void 0:a.ptoBalance),")"]},e.id)})]}),(0,r.jsxs)(k.Hj,{children:[(0,r.jsx)(k.nA,{className:"font-medium",children:"Comments"}),ed.map((e,t)=>(0,r.jsx)(k.nA,{className:"text-left",children:(0,r.jsxs)(C.AM,{children:[(0,r.jsx)(C.Wv,{asChild:!0,children:(0,r.jsxs)(h.$,{variant:"outline",size:"sm",children:[(0,r.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"View/Edit"]})}),(0,r.jsx)(C.hl,{className:"w-80",children:(0,r.jsx)(p.zB,{control:eu,name:"employees.".concat(t,".comment"),render:t=>{var a;let{field:s}=t;return(0,r.jsxs)(p.eI,{className:"grid gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h4",{className:"font-medium leading-none",children:"Comment"}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Internal note for ",e.name,"."]})]}),(0,r.jsx)(p.MJ,{children:(0,r.jsx)(I.T,{...s,value:null!=(a=s.value)?a:""})}),(0,r.jsx)(p.C5,{})]})}})})]})},e.id))]}),0===ed.length&&(0,r.jsx)(k.Hj,{children:(0,r.jsx)(k.nA,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"No active employees found. Please add an employee first."})})]})]})}),eo.formState.errors.employees&&(0,r.jsxs)(S.Fc,{variant:"destructive",children:[(0,r.jsx)(w.A,{className:"h-4 w-4"}),(0,r.jsx)(S.XL,{children:"Error"}),(0,r.jsx)(S.TN,{children:"Please check the form for errors. Total or PTO hours may be invalid."})]}),(0,r.jsx)("div",{className:"flex justify-end pt-4",children:(0,r.jsx)(h.$,{type:"submit",children:"Calculate Payroll"})})]})})})]}),$&&(0,r.jsxs)(x.Zp,{children:[(0,r.jsxs)(x.aR,{children:[(0,r.jsxs)(x.ZB,{className:"flex items-center",children:[(0,r.jsx)(j.A,{className:"mr-2 h-5 w-5 text-accent"})," 3. Review & Approve"]}),(0,r.jsx)(x.BT,{children:"Review the calculated results. Make adjustments if needed, then approve to finalize."})]}),(0,r.jsxs)(x.Wu,{children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(k.XI,{children:[(0,r.jsx)(k.A0,{children:(0,r.jsxs)(k.Hj,{children:[(0,r.jsx)(k.nd,{className:"font-bold min-w-[200px]",children:"Metric"}),J.map(e=>(0,r.jsx)(k.nd,{className:"text-left",children:e.name},e.employeeId))]})}),(0,r.jsxs)(k.BF,{children:[(0,r.jsx)(k.Hj,{children:(0,r.jsx)(k.nA,{colSpan:J.length+1,className:"p-2 bg-muted/20 font-semibold text-muted-foreground",children:"Hours"})}),(0,r.jsxs)(k.Hj,{children:[(0,r.jsx)(k.nA,{children:"Total Hours Worked"}),J.map(e=>(0,r.jsx)(k.nA,{className:"text-left tabular-nums",children:"Hourly"===e.payMethod?eg(e.totalHoursWorked):"N/A"},e.employeeId))]}),(0,r.jsxs)(k.Hj,{children:[(0,r.jsx)(k.nA,{children:"Check Hours"}),J.map(e=>(0,r.jsx)(k.nA,{className:"text-left tabular-nums",children:"Hourly"===e.payMethod?eg(e.checkHours):"N/A"},e.employeeId))]}),(0,r.jsxs)(k.Hj,{children:[(0,r.jsx)(k.nA,{children:"Other Hours"}),J.map(e=>(0,r.jsx)(k.nA,{className:"text-left tabular-nums",children:"Hourly"===e.payMethod?eg(e.otherHours):"N/A"},e.employeeId))]}),(0,r.jsxs)(k.Hj,{children:[(0,r.jsx)(k.nA,{children:"PTO Used"}),J.map(e=>(0,r.jsx)(k.nA,{className:"text-left tabular-nums",children:eg(e.ptoUsed)},e.employeeId))]}),(0,r.jsx)(k.Hj,{children:(0,r.jsx)(k.nA,{colSpan:J.length+1,className:"p-2 bg-muted/20 font-semibold text-muted-foreground",children:"Pay"})}),(0,r.jsxs)(k.Hj,{children:[(0,r.jsx)(k.nA,{children:"Rate/Check"}),J.map(e=>(0,r.jsx)(k.nA,{className:"text-left tabular-nums",children:"Hourly"===e.payMethod?ev(e.payRateCheck):"N/A"},e.employeeId))]}),(0,r.jsxs)(k.Hj,{children:[(0,r.jsx)(k.nA,{children:"Rate/Others"}),J.map(e=>(0,r.jsx)(k.nA,{className:"text-left tabular-nums",children:"Hourly"===e.payMethod?ev(e.payRateOthers):"N/A"},e.employeeId))]}),(0,r.jsxs)(k.Hj,{children:[(0,r.jsx)(k.nA,{children:"Bi-weekly Salary"}),J.map(e=>(0,r.jsx)(k.nA,{className:"text-left tabular-nums",children:"Salaried"===e.payMethod?ev(e.biWeeklySalary):"N/A"},e.employeeId))]}),(0,r.jsxs)(k.Hj,{children:[(0,r.jsx)(k.nA,{children:"Others-ADJ $"}),J.map(e=>(0,r.jsx)(k.nA,{className:"text-left",children:(0,r.jsx)(f.p,{type:"number",step:"0.01",className:"h-8 w-28",value:e.otherAdjustment,onChange:t=>ey(e.employeeId,t.target.value),disabled:"Salaried"===e.payMethod})},e.employeeId))]}),(0,r.jsxs)(k.Hj,{children:[(0,r.jsx)(k.nA,{className:"font-semibold",children:"Gross Check Amount"}),J.map(e=>(0,r.jsx)(k.nA,{className:"font-semibold text-left tabular-nums",children:ev(e.grossCheckAmount)},e.employeeId))]}),(0,r.jsxs)(k.Hj,{children:[(0,r.jsx)(k.nA,{className:"font-semibold",children:"Gross Other Amount"}),J.map(e=>(0,r.jsx)(k.nA,{className:"font-semibold text-left tabular-nums",children:ev(e.grossOtherAmount)},e.employeeId))]}),(0,r.jsx)(k.Hj,{children:(0,r.jsx)(k.nA,{colSpan:J.length+1,className:"p-2 bg-muted/20 font-semibold text-muted-foreground",children:"PTO Balance"})}),(0,r.jsxs)(k.Hj,{children:[(0,r.jsx)(k.nA,{children:"New PTO Balance"}),J.map(e=>(0,r.jsxs)(k.nA,{className:"text-left tabular-nums",children:["(",eg(e.newPtoBalance),")"]},e.employeeId))]})]})]})}),(0,r.jsx)(H.w,{className:"my-6"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Payroll Summary"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-6",children:[(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)(D.J,{children:["GP ",(0,r.jsx)("span",{className:"font-bold",children:ev(J.reduce((e,t)=>e+t.grossCheckAmount,0))})]})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.J,{children:"EMPLOYER"}),(0,r.jsx)(f.p,{value:Q,onChange:e=>K(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.J,{children:"EMPLOYEE"}),(0,r.jsx)(f.p,{value:ee,onChange:e=>et(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.J,{children:"DED"}),(0,r.jsx)(f.p,{value:ea,onChange:e=>er(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.J,{children:"NET"}),(0,r.jsx)(f.p,{value:es,onChange:e=>el(e.target.value)})]}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)(D.J,{children:["OTHERS ",(0,r.jsx)("span",{className:"font-bold",children:ev(J.reduce((e,t)=>e+t.grossOtherAmount,0))})]})})]})]}),(0,r.jsx)("div",{className:"flex justify-end pt-6",children:(0,r.jsxs)(h.$,{size:"lg",className:"bg-accent text-accent-foreground hover:bg-accent/90",onClick:ej,disabled:G,children:[G?(0,r.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(A.A,{className:"mr-2 h-4 w-4"}),G?"Saving...":en?"Update & Finalize":"Approve & Finalize"]})})]})]})]})}var L=a(2543),W=a(3638),U=a(1920),G=a(5511);function V(){let{user:e}=(0,P.A)(),t=(0,l.useSearchParams)().get("id"),[a,d]=s.useState(),[c,u]=s.useState(),[m,p]=s.useState(null),[f,y]=s.useState(!0),[j,b]=s.useState(!0),[N,w]=s.useState([]),[A,k]=s.useState(null),H=!!t;s.useEffect(()=>{if(!H){let e=localStorage.getItem("lastPayrollEndDate");if(e){let t=new Date(e),a=(0,n.f)(t,1),r=(0,n.f)(a,13);d(a),u(r)}}},[H]),s.useEffect(()=>{if(!e)return void b(!1);(async()=>{b(!0);try{let t=(0,T.rJ)(E.db,"users",e.uid,"payrolls"),a=(0,T.P)(t,(0,T.My)("toDate","desc")),r=await (0,T.GG)(a),s=r.docs.map(e=>{let t=e.data(),[a,r,s]=t.fromDate.split("-").map(Number),[l,n,o]=t.toDate.split("-").map(Number);return{from:new Date(a,r-1,s),to:new Date(l,n-1,o)}});if(w(s),!r.empty){let e=r.docs[0].data(),[t,a,s]=e.fromDate.split("-").map(Number),[l,n,d]=e.toDate.split("-").map(Number),i=new Date(t,a-1,s),c=new Date(l,n-1,d);k("".concat((0,o.GP)(i,"LLL dd, y")," - ").concat((0,o.GP)(c,"LLL dd, y")))}}catch(e){console.error("Error fetching payroll data:",e)}finally{b(!1)}})()},[e]),s.useEffect(()=>{if(t&&e){y(!0);let a=(0,T.H9)(E.db,"users",e.uid,"payrolls",t);(0,T.x7)(a).then(e=>{if(e.exists()){let t={id:e.id,...e.data()};p(t);let[a,r,s]=t.fromDate.split("-").map(Number),[l,n,o]=t.toDate.split("-").map(Number);d(new Date(a,r-1,s)),u(new Date(l,n-1,o))}else console.error("No such payroll document!")}).catch(e=>{console.error("Error fetching payroll:",e)}).finally(()=>{y(!1)})}else y(!1)},[t,e]);let S=e=>{if(H)return!1;for(let t of N)if(e>=t.from&&e<=t.to)return!0;return!1};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(h.$,{variant:"outline",asChild:!0,className:"w-fit",children:(0,r.jsxs)(i(),{href:"/dashboard/payroll",children:[(0,r.jsx)(L.A,{className:"mr-2 h-4 w-4"})," Back to Payroll History"]})}),(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:H?"Edit Payroll":"Run New Payroll"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:H?"Editing payroll for period: ".concat(m&&a&&c?(0,o.GP)(a,"LLL dd, y")+" - "+(0,o.GP)(c,"LLL dd, y"):"..."):"Calculate employee payroll for a specific period."})]}),!H&&A&&(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-sm font-medium flex items-center text-muted-foreground",children:[(0,r.jsx)(W.A,{className:"mr-2 h-4 w-4"})," Last Payroll Run"]}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:A})]})]}),f||j?(0,r.jsxs)(x.Zp,{children:[(0,r.jsx)(x.aR,{children:(0,r.jsx)(x.ZB,{children:"Loading Payroll Data..."})}),(0,r.jsx)(x.Wu,{children:(0,r.jsx)("div",{className:"flex items-center justify-center py-10",children:(0,r.jsx)(g.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.Zp,{children:[(0,r.jsxs)(x.aR,{children:[(0,r.jsx)(x.ZB,{children:"1. Pay Period"}),(0,r.jsx)(x.BT,{children:H?"The pay period for this run is locked.":"Choose the date range for this payroll run. Previously used dates are disabled."})]}),(0,r.jsx)(x.Wu,{children:(0,r.jsxs)("div",{className:"flex flex-wrap items-end gap-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(D.J,{htmlFor:"from-date",children:"From"}),(0,r.jsxs)(C.AM,{children:[(0,r.jsx)(C.Wv,{asChild:!0,children:(0,r.jsxs)(h.$,{id:"from-date",variant:"outline",className:(0,M.cn)("w-[240px] justify-start text-left font-normal",!a&&"text-muted-foreground"),disabled:H,children:[(0,r.jsx)(U.A,{className:"mr-2 h-4 w-4"}),a?(0,o.GP)(a,"LLL dd, y"):(0,r.jsx)("span",{children:"Pick a start date"})]})}),(0,r.jsx)(C.hl,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(G.V,{mode:"single",selected:a,onSelect:d,disabled:e=>c&&e>c||e>new Date||H||S(e),initialFocus:!0})})]})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(D.J,{htmlFor:"to-date",children:"To"}),(0,r.jsxs)(C.AM,{children:[(0,r.jsx)(C.Wv,{asChild:!0,children:(0,r.jsxs)(h.$,{id:"to-date",variant:"outline",className:(0,M.cn)("w-[240px] justify-start text-left font-normal",!c&&"text-muted-foreground"),disabled:H,children:[(0,r.jsx)(U.A,{className:"mr-2 h-4 w-4"}),c?(0,o.GP)(c,"LLL dd, y"):(0,r.jsx)("span",{children:"Pick an end date"})]})}),(0,r.jsx)(C.hl,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(G.V,{mode:"single",selected:c,onSelect:u,disabled:e=>!a||e<a||e>new Date||H||S(e),initialFocus:!0})})]})]})]})})]}),a&&c?(0,r.jsx)(B,{from:a,to:c,payrollId:t,initialPayrollData:m},t||"".concat((0,o.GP)(a,"yyyy-MM-dd"),"-").concat((0,o.GP)(c,"yyyy-MM-dd"))):(0,r.jsxs)(x.Zp,{children:[(0,r.jsxs)(x.aR,{children:[(0,r.jsxs)(x.ZB,{className:"flex items-center",children:[(0,r.jsx)(v.A,{className:"mr-2 h-5 w-5 text-muted-foreground"})," 2. Calculate Payroll"]}),(0,r.jsx)(x.BT,{children:"Enter hours for each employee for the selected pay period."})]}),(0,r.jsx)(x.Wu,{children:(0,r.jsx)("p",{className:"text-center text-muted-foreground py-10",children:"Please select a pay period above to begin."})})]})]})]})}function J(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,r.jsx)(g.A,{className:"h-8 w-8 animate-spin"})}),children:(0,r.jsx)(V,{})})}},2523:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var r=a(5155),s=a(2115),l=a(9434);let n=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","print:shadow-none print:border-gray-400 print:h-8",a),ref:t,...n})});n.displayName="Input"},3422:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]])},3638:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},4063:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},4636:(e,t,a)=>{"use strict";a.d(t,{AM:()=>o,Wv:()=>d,hl:()=>i});var r=a(5155),s=a(2115),l=a(547),n=a(9434);let o=l.bL,d=l.l9,i=s.forwardRef((e,t)=>{let{className:a,align:s="center",sideOffset:o=4,...d}=e;return(0,r.jsx)(l.ZL,{children:(0,r.jsx)(l.UC,{ref:t,align:s,sideOffset:o,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...d})})});i.displayName=l.UC.displayName},5057:(e,t,a)=>{"use strict";a.d(t,{J:()=>i});var r=a(5155),s=a(2115),l=a(968),n=a(2085),o=a(9434);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.b,{ref:t,className:(0,o.cn)(d(),a),...s})});i.displayName=l.b.displayName},5127:(e,t,a)=>{"use strict";a.d(t,{A0:()=>o,BF:()=>d,Hj:()=>i,XI:()=>n,nA:()=>u,nd:()=>c,r6:()=>m});var r=a(5155),s=a(2115),l=a(9434);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",a),...s})})});n.displayName="Table";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",a),...s})});o.displayName="TableHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...s})});d.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});i.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});u.displayName="TableCell";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",a),...s})});m.displayName="TableCaption"},5365:(e,t,a)=>{"use strict";a.d(t,{Fc:()=>d,TN:()=>c,XL:()=>i});var r=a(5155),s=a(2115),l=a(2085),n=a(9434);let o=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,...l}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(o({variant:s}),a),...l})});d.displayName="Alert";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",a),...s})});i.displayName="AlertTitle";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",a),...s})});c.displayName="AlertDescription"},5511:(e,t,a)=>{"use strict";a.d(t,{V:()=>i});var r=a(5155);a(2115);var s=a(965),l=a(3158),n=a(6457),o=a(9434),d=a(285);function i(e){let{className:t,classNames:a,showOutsideDays:i=!0,...c}=e;return(0,r.jsx)(n.hv,{showOutsideDays:i,className:(0,o.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,o.cn)((0,d.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,o.cn)((0,d.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,r.jsx)(s.A,{className:(0,o.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,r.jsx)(l.A,{className:(0,o.cn)("h-4 w-4",t),...a})}},...c})}i.displayName="Calendar"},5669:(e,t,a)=>{Promise.resolve().then(a.bind(a,1440))},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},6104:(e,t,a)=>{"use strict";let r,s,l;a.d(t,{db:()=>l,j2:()=>s});var n=a(3915),o=a(3004),d=a(5317);try{r=(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)({apiKey:"AIzaSyAkP18VtzDihlYGJYJoNsH48v83yHobkds",authDomain:"payroll-3582c.firebaseapp.com",projectId:"payroll-3582c",storageBucket:"payroll-3582c.firebasestorage.app",messagingSenderId:"595764753966",appId:"1:595764753966:web:33c2371bf504e8985e91bf",measurementId:"G-9TSQDML6N1"}),s=(0,o.xI)(r),l=(0,d.aU)(r)}catch(e){throw console.error("Firebase initialization error",e),Error("Failed to initialize Firebase. Please check your .env.local file and restart the server.")}},6695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>i,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>o,wL:()=>u});var r=a(5155),s=a(2115),l=a(9434);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});n.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...s})});o.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});d.displayName="CardTitle";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});i.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},7481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>m});var r=a(2115);let s=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],i={toasts:[]};function c(e){i=o(i,e),d.forEach(e=>{e(i)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=r.useState(i);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},7600:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,AuthProvider:()=>i});var r=a(5155),s=a(2115),l=a(3004),n=a(6104),o=a(8856);let d=s.createContext(void 0);function i(e){let{children:t}=e,[a,i]=s.useState(null),[c,u]=s.useState(!0);return(s.useEffect(()=>{let e=(0,l.hg)(n.j2,e=>{i(e),u(!1)},e=>{console.error("Auth state change error:",e),u(!1)});return()=>e()},[]),c)?(0,r.jsx)("div",{className:"flex h-screen w-screen items-center justify-center",children:(0,r.jsxs)("div",{className:"w-1/2 space-y-4",children:[(0,r.jsx)(o.E,{className:"h-12 w-full"}),(0,r.jsx)(o.E,{className:"h-32 w-full"}),(0,r.jsx)(o.E,{className:"h-32 w-full"})]})}):(0,r.jsx)(d.Provider,{value:{user:a,loading:c},children:t})}function c(){let e=s.useContext(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7759:(e,t,a)=>{"use strict";a.d(t,{C5:()=>j,MJ:()=>x,Rr:()=>y,eI:()=>p,lR:()=>f,lV:()=>i,zB:()=>u});var r=a(5155),s=a(2115),l=a(9708),n=a(2177),o=a(9434),d=a(5057);let i=n.Op,c=s.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(c.Provider,{value:{name:t.name},children:(0,r.jsx)(n.xI,{...t})})},m=()=>{let e=s.useContext(c),t=s.useContext(h),{getFieldState:a,formState:r}=(0,n.xW)(),l=a(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...l}},h=s.createContext({}),p=s.forwardRef((e,t)=>{let{className:a,...l}=e,n=s.useId();return(0,r.jsx)(h.Provider,{value:{id:n},children:(0,r.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",a),...l})})});p.displayName="FormItem";let f=s.forwardRef((e,t)=>{let{className:a,...s}=e,{error:l,formItemId:n}=m();return(0,r.jsx)(d.J,{ref:t,className:(0,o.cn)(l&&"text-destructive",a),htmlFor:n,...s})});f.displayName="FormLabel";let x=s.forwardRef((e,t)=>{let{...a}=e,{error:s,formItemId:n,formDescriptionId:o,formMessageId:d}=m();return(0,r.jsx)(l.DX,{ref:t,id:n,"aria-describedby":s?"".concat(o," ").concat(d):"".concat(o),"aria-invalid":!!s,...a})});x.displayName="FormControl";let y=s.forwardRef((e,t)=>{let{className:a,...s}=e,{formDescriptionId:l}=m();return(0,r.jsx)("p",{ref:t,id:l,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});y.displayName="FormDescription";let j=s.forwardRef((e,t)=>{var a;let{className:s,children:l,...n}=e,{error:d,formMessageId:i}=m(),c=d?String(null!=(a=null==d?void 0:d.message)?a:""):l;return c?(0,r.jsx)("p",{ref:t,id:i,className:(0,o.cn)("text-sm font-medium text-destructive",s),...n,children:c}):null});j.displayName="FormMessage"},8376:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8539:(e,t,a)=>{"use strict";a.d(t,{T:()=>n});var r=a(5155),s=a(2115),l=a(9434);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...s})});n.displayName="Textarea"},8856:(e,t,a)=>{"use strict";a.d(t,{E:()=>l});var r=a(5155),s=a(9434);function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",t),...a})}},8905:(e,t,a)=>{"use strict";a.d(t,{C:()=>n});var r=a(2115),s=a(6101),l=a(2712),n=e=>{let{present:t,children:a}=e,n=function(e){var t,a;let[s,n]=r.useState(),d=r.useRef({}),i=r.useRef(e),c=r.useRef("none"),[u,m]=(t=e?"mounted":"unmounted",a={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},r.useReducer((e,t)=>{let r=a[e][t];return null!=r?r:e},t));return r.useEffect(()=>{let e=o(d.current);c.current="mounted"===u?e:"none"},[u]),(0,l.N)(()=>{let t=d.current,a=i.current;if(a!==e){let r=c.current,s=o(t);e?m("MOUNT"):"none"===s||(null==t?void 0:t.display)==="none"?m("UNMOUNT"):a&&r!==s?m("ANIMATION_OUT"):m("UNMOUNT"),i.current=e}},[e,m]),(0,l.N)(()=>{if(s){var e;let t,a=null!=(e=s.ownerDocument.defaultView)?e:window,r=e=>{let r=o(d.current).includes(e.animationName);if(e.target===s&&r&&(m("ANIMATION_END"),!i.current)){let e=s.style.animationFillMode;s.style.animationFillMode="forwards",t=a.setTimeout(()=>{"forwards"===s.style.animationFillMode&&(s.style.animationFillMode=e)})}},l=e=>{e.target===s&&(c.current=o(d.current))};return s.addEventListener("animationstart",l),s.addEventListener("animationcancel",r),s.addEventListener("animationend",r),()=>{a.clearTimeout(t),s.removeEventListener("animationstart",l),s.removeEventListener("animationcancel",r),s.removeEventListener("animationend",r)}}m("ANIMATION_END")},[s,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:r.useCallback(e=>{e&&(d.current=getComputedStyle(e)),n(e)},[])}}(t),d="function"==typeof a?a({present:n.isPresent}):r.Children.only(a),i=(0,s.s)(n.ref,function(e){var t,a;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?e.ref:(s=(r=null==(a=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:a.get)&&"isReactWarning"in r&&r.isReactWarning)?e.props.ref:e.props.ref||e.ref}(d));return"function"==typeof a||n.isPresent?r.cloneElement(d,{ref:i}):null};function o(e){return(null==e?void 0:e.animationName)||"none"}n.displayName="Presence"},9100:(e,t,a)=>{"use strict";a.d(t,{w:()=>c});var r=a(5155),s=a(2115),l=a(3655),n="horizontal",o=["horizontal","vertical"],d=s.forwardRef((e,t)=>{var a;let{decorative:s,orientation:d=n,...i}=e,c=(a=d,o.includes(a))?d:n;return(0,r.jsx)(l.sG.div,{"data-orientation":c,...s?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...i,ref:t})});d.displayName="Separator";var i=a(9434);let c=s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:l=!0,...n}=e;return(0,r.jsx)(d,{ref:t,decorative:l,orientation:s,className:(0,i.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...n})});c.displayName=d.displayName},9119:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var r=a(2596),s=a(9688);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,416,668,873,874,263,152,521,784,31,441,684,358],()=>t(5669)),_N_E=e.O()}]);