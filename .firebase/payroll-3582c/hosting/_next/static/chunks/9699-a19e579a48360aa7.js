"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9699],{14636:(e,a,s)=>{s.d(a,{AM:()=>o,Wv:()=>d,hl:()=>c});var t=s(95155),l=s(12115),r=s(20547),n=s(59434);let o=r.bL,d=r.l9,c=l.forwardRef((e,a)=>{let{className:s,align:l="center",sideOffset:o=4,...d}=e;return(0,t.jsx)(r.ZL,{children:(0,t.jsx)(r.UC,{ref:a,align:l,sideOffset:o,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...d})})});c.displayName=r.UC.displayName},22346:(e,a,s)=>{s.d(a,{w:()=>o});var t=s(95155),l=s(12115),r=s(87489),n=s(59434);let o=l.forwardRef((e,a)=>{let{className:s,orientation:l="horizontal",decorative:o=!0,...d}=e;return(0,t.jsx)(r.b,{ref:a,decorative:o,orientation:l,className:(0,n.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",s),...d})});o.displayName=r.b.displayName},30241:(e,a,s)=>{s.d(a,{Ff:()=>m,he:()=>h,lV:()=>p});var t=s(80644),l=s(20908),r=s(53941),n=s(24386),o=s(70831),d=s(13774),c=s(63482),i=s(1407),u=s(76959);function m(e){let a=(0,t.o)(e),s=(0,l.C)(a),i=[...h(s),...h(s+1)].find(e=>(0,r.d)(e.payDate,a)||e.payDate.getTime()===a.getTime());if(i)return i;let u=new Date("2025-08-24T00:00:00"),m=Math.floor((0,n.c)(a,u)/14),p=(0,o.f)(u,14*m),y=(0,o.f)(p,13),x=(0,d.G)(y);return(0,c.Y)(x,a)&&(p=(0,o.f)(p,14),y=(0,o.f)(p,13),x=(0,d.G)(y)),{start:p,end:y,payDate:x}}function h(e){let a=new Date("2025-08-24T00:00:00"),s=[],t=(0,i.D)(new Date(e,0,1)),r=Math.floor((0,n.c)(t,a)/14),c=(0,o.f)(a,14*r);for(;(0,l.C)(c)<=e;){let a=(0,o.f)(c,13),t=(0,d.G)(a);(0,l.C)(c)===e&&s.push({start:c,end:a,payDate:t}),c=(0,o.f)(c,14)}return s}function p(e){let a=h((0,l.C)(e)).find(a=>(0,u.r)(a.start,e));return a?a.payDate:null}},44829:(e,a,s)=>{s.d(a,{B:()=>W});var t=s(95155),l=s(12115),r=s(90221),n=s(62177),o=s(55594),d=s(30285),c=s(17759),i=s(62523),u=s(66695),m=s(87481),h=s(8376),p=s(23422),y=s(50172),x=s(67554),f=s(94063),j=s(31949),v=s(59119),b=s(85127),H=s(22346),g=s(55365),N=s(59434),k=s(9208),A=s(41784),w=s(35695),B=s(14636),D=s(88539),C=s(27600),S=s(35317),M=s(56104),I=s(68856),U=s(85057),R=s(30241);let z=o.z.object({employeeId:o.z.string(),name:o.z.string(),payMethod:o.z.enum(["Hourly","Salaried"]),payRateCheck:o.z.number().optional(),payRateOthers:o.z.coerce.number().min(0).optional(),biWeeklySalary:o.z.number().optional(),totalHoursWorked:o.z.coerce.number().min(0,{message:"Hours must be non-negative."}).default(0),checkHours:o.z.coerce.number().min(0,{message:"Hours must be non-negative."}).default(0),otherHours:o.z.coerce.number().min(0).default(0),vdHoursUsed:o.z.coerce.number().min(0).default(0),hdHoursUsed:o.z.coerce.number().min(0).default(0),sdHoursUsed:o.z.coerce.number().min(0).default(0),vacationBalance:o.z.number().optional(),holidayBalance:o.z.number().optional(),sickDayBalance:o.z.number().optional(),standardCheckHours:o.z.number().optional(),comment:o.z.string().optional()}).refine(e=>"Hourly"!==e.payMethod||e.checkHours<=e.totalHoursWorked,{message:"Check hours cannot exceed total hours.",path:["checkHours"]}).refine(e=>{var a;return e.vdHoursUsed<=(null!=(a=e.vacationBalance)?a:0)},{message:"VD hours used cannot exceed available balance.",path:["vdHoursUsed"]}).refine(e=>{var a;return e.hdHoursUsed<=(null!=(a=e.holidayBalance)?a:0)},{message:"HD hours used cannot exceed available balance.",path:["hdHoursUsed"]}).refine(e=>{var a;return e.sdHoursUsed<=(null!=(a=e.sickDayBalance)?a:0)},{message:"SD hours used cannot exceed available balance.",path:["sdHoursUsed"]}),E=o.z.object({employees:o.z.array(z)}),O=[{key:"totalHoursWorked",label:"Total Hours Worked",props:{step:"0.1",min:"0"}},{key:"checkHours",label:"Check Hours",props:{step:"0.1",min:"0"}},{key:"otherHours",label:"Other Hours",props:{readOnly:!0,className:"bg-muted/50"}},{key:"vdHoursUsed",label:"VD Hours",props:{step:"0.1",min:"0"}},{key:"hdHoursUsed",label:"HD Hours",props:{step:"0.1",min:"0"}},{key:"sdHoursUsed",label:"SD Hours",props:{step:"0.1",min:"0"}}];function W(e){let{from:a,to:s,payrollId:o,initialPayrollData:z}=e,W=(0,w.useRouter)(),{toast:P}=(0,m.dj)(),{user:F}=(0,C.A)(),[_,V]=l.useState(!0),[T,G]=l.useState(!1),[J,L]=l.useState(!1),[Z,$]=l.useState([]),[X,Y]=l.useState(!1),[q,K]=l.useState("My Small Business"),[Q,ee]=l.useState(""),[ea,es]=l.useState(""),[et,el]=l.useState(""),[er,en]=l.useState(""),eo=!!o,ed=(0,n.mN)({resolver:(0,r.u)(E),defaultValues:{employees:[]},mode:"onChange"}),{fields:ec}=(0,n.jz)({control:ed.control,name:"employees"}),{setValue:ei,watch:eu,control:em,reset:eh,getValues:ep}=ed,ey=eu("employees"),ex=l.useCallback(async e=>{if(!F||!e||0===e.length)return;G(!0),P({title:"Fetching Hours",description:"Calculating worked hours from time entries..."});let t=new Date(s);t.setHours(23,59,59,999);try{let s=e.map((e,a)=>({...e,index:a})).filter(e=>"Hourly"===e.payMethod);if(0===s.length){P({title:"No Hourly Employees",description:"Skipping hour fetch.",variant:"default"}),G(!1);return}await Promise.all(s.map(async e=>{var s;let l=0,r=(0,S.rJ)(M.db,"users",F.uid,"employees",e.employeeId,"timeEntries"),n=(0,S.P)(r,(0,S._M)("timeIn",">=",a),(0,S._M)("timeIn","<=",t));(await (0,S.GG)(n)).forEach(e=>{let a=e.data();if(a.timeOut){let e=(0,k.o)(a.timeOut.toDate(),a.timeIn.toDate());l+=e>0?e:0}});let o=l/60,d=parseFloat(o.toFixed(1)),c=null!=(s=e.standardCheckHours)?s:0,i=Math.min(d,c),u=Math.max(0,d-c);ei("employees.".concat(e.index,".totalHoursWorked"),d,{shouldValidate:!0,shouldDirty:!0}),ei("employees.".concat(e.index,".checkHours"),parseFloat(i.toFixed(1)),{shouldValidate:!0,shouldDirty:!0}),ei("employees.".concat(e.index,".otherHours"),parseFloat(u.toFixed(1)),{shouldValidate:!0,shouldDirty:!0})})),P({title:"Hours Fetched",description:"Total hours for hourly employees have been updated.",variant:"default"})}catch(e){console.error("Error fetching hours:",e),P({title:"Error",description:"Could not fetch hours from time entries.",variant:"destructive"})}finally{G(!1)}},[F,a,s,ei,P]);l.useEffect(()=>{F&&(async()=>{V(!0);try{let e,a=(0,S.H9)(M.db,"users",F.uid),s=await (0,S.x7)(a);s.exists()&&K(s.data().companyName||"My Small Business");let t=(0,S.rJ)(M.db,"users",F.uid,"employees"),l=(0,S.P)(t,(0,S.My)("firstName","asc")),r=(await (0,S.GG)(l)).docs.map(e=>({id:e.id,...e.data()}));if(eo&&z){e=z.inputs.map(e=>{let a=r.find(a=>a.id===e.employeeId);return{...e,vacationBalance:a?a.vacationBalance:e.vacationBalance,holidayBalance:a?a.holidayBalance:e.holidayBalance,sickDayBalance:a?a.sickDayBalance:e.sickDayBalance,comment:a?a.comment:e.comment}}),ee(z.summaryEmployer||""),es(z.summaryEmployee||""),el(z.summaryDeductions||""),en(z.summaryNetPay||"");let a=new Set(z.inputs.map(e=>e.employeeId));r.filter(e=>!a.has(e.id)).forEach(a=>{var s,t,l;e.push({employeeId:a.id,name:"".concat(a.firstName),payMethod:a.payMethod,payRateCheck:a.payRateCheck,payRateOthers:null!=(s=a.payRateOthers)?s:0,biWeeklySalary:null!=(t=a.biWeeklySalary)?t:0,vacationBalance:a.vacationBalance,holidayBalance:a.holidayBalance,sickDayBalance:a.sickDayBalance,standardCheckHours:null!=(l=a.standardCheckHours)?l:0,totalHoursWorked:0,checkHours:0,otherHours:0,vdHoursUsed:0,hdHoursUsed:0,sdHoursUsed:0,comment:a.comment||""})}),eh({employees:e})}else e=r.map(e=>{var a,s,t;return{employeeId:e.id,name:"".concat(e.firstName),payMethod:e.payMethod,payRateCheck:e.payRateCheck,payRateOthers:null!=(a=e.payRateOthers)?a:0,biWeeklySalary:null!=(s=e.biWeeklySalary)?s:0,vacationBalance:e.vacationBalance,holidayBalance:e.holidayBalance,sickDayBalance:e.sickDayBalance,standardCheckHours:null!=(t=e.standardCheckHours)?t:0,totalHoursWorked:0,checkHours:0,otherHours:0,vdHoursUsed:0,hdHoursUsed:0,sdHoursUsed:0,comment:e.comment||""}}),eh({employees:e}),e.length>0&&await ex(e)}catch(e){console.error("Error fetching payroll data:",e),P({title:"Error",description:"Failed to load initial payroll data.",variant:"destructive"})}finally{V(!1)}})()},[F,o,z,a,s]),l.useEffect(()=>{let e=eu((e,a)=>{let{name:s}=a;if(s&&(s.endsWith(".totalHoursWorked")||s.endsWith(".checkHours"))){let a=s.match(/^employees\.(\d+)\./);if(a){var t;let s=parseInt(a[1],10),l=null==(t=e.employees)?void 0:t[s];if(l&&"Hourly"===l.payMethod){let e=Math.max(0,(Number(l.totalHoursWorked)||0)-(Number(l.checkHours)||0));ei("employees.".concat(s,".otherHours"),e,{shouldValidate:!0})}}}});return()=>e.unsubscribe()},[eu,ei]);let ef=e=>{let a=Number(e);return isNaN(a)?0:a},ej=(e,a)=>{let s=parseFloat(a);$(a=>a.map(a=>{if(a.employeeId===e&&"Hourly"===a.payMethod){let e=isNaN(s)?0:s,t=a.payRateOthers*a.otherHours;return{...a,otherAdjustment:e,grossOtherAmount:t+e}}return a}))};async function ev(){if(!F)return void P({title:"Not Authenticated",variant:"destructive"});L(!0);let e=ed.getValues().employees;try{let t=Z.reduce((e,a)=>e+a.grossCheckAmount+a.grossOtherAmount,0),l=(0,R.lV)(a),r={fromDate:(0,A.GP)(a,"yyyy-MM-dd"),toDate:(0,A.GP)(s,"yyyy-MM-dd"),payDate:l?(0,A.GP)(l,"yyyy-MM-dd"):void 0,totalAmount:t,status:"Completed",results:Z,inputs:e,summaryEmployer:Q,summaryEmployee:ea,summaryDeductions:et,summaryNetPay:er},n=o;if(eo&&o){let e=(0,S.H9)(M.db,"users",F.uid,"payrolls",o);await (0,S.mZ)(e,r)}else{let e=(0,S.rJ)(M.db,"users",F.uid,"payrolls");n=(await (0,S.gS)(e,r)).id}let d=(0,S.wP)(M.db);Z.forEach(e=>{let a=(0,S.H9)(M.db,"users",F.uid,"employees",e.employeeId);d.update(a,{vacationBalance:e.newVacationBalance,holidayBalance:e.newHolidayBalance,sickDayBalance:e.newSickDayBalance})}),await d.commit(),localStorage.setItem("lastPayrollEndDate",s.toISOString()),localStorage.removeItem("timesheetDateRange"),P({title:"Payroll ".concat(eo?"Updated":"Approved"),description:"Payroll history saved and balances updated. Redirecting to report..."}),W.push("/dashboard/manager/payroll/report?id=".concat(n))}catch(e){console.error("Failed to approve payroll:",e),P({title:"Error ".concat(eo?"Updating":"Approving"," Payroll"),description:"Could not save this payroll run. Please try again.",variant:"destructive"})}finally{L(!1)}}let eb=e=>"number"!=typeof e||isNaN(e)?"$ ---.--":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),eH=e=>{let a=Number(e);return null==e||isNaN(a)?"0.00":a.toFixed(2)};return _?(0,t.jsxs)(u.Zp,{children:[(0,t.jsxs)(u.aR,{children:[(0,t.jsxs)(u.ZB,{className:"flex items-center",children:[(0,t.jsx)(p.A,{className:"mr-2 h-5 w-5 text-muted-foreground"})," 2. Calculate Payroll"]}),(0,t.jsx)(u.BT,{children:"Loading employee data..."})]}),(0,t.jsx)(u.Wu,{className:"py-10",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.E,{className:"h-10 w-full"}),(0,t.jsx)(I.E,{className:"h-10 w-full"}),(0,t.jsx)(I.E,{className:"h-10 w-full"})]})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(u.Zp,{children:[(0,t.jsxs)(u.aR,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(u.ZB,{className:"flex items-center",children:[(0,t.jsx)(p.A,{className:"mr-2 h-5 w-5 text-muted-foreground"})," 2. Calculate Payroll"]}),(0,t.jsx)(u.BT,{children:"Enter hours and review comments for each employee for the current pay period."})]}),!eo&&(0,t.jsxs)(d.$,{variant:"outline",onClick:()=>ex(ep().employees),disabled:T,children:[T?(0,t.jsx)(y.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Fetch Hours"]})]}),(0,t.jsx)(u.Wu,{children:(0,t.jsx)(c.lV,{...ed,children:(0,t.jsxs)("form",{onSubmit:ed.handleSubmit(function(e){$(e.employees.map(e=>{let a,s,t,l,r=ef(e.vdHoursUsed),n=ef(e.hdHoursUsed),o=ef(e.sdHoursUsed);if(eo&&z){let l=z.inputs.find(a=>a.employeeId===e.employeeId),d=l?ef(l.vdHoursUsed):0,c=l?ef(l.hdHoursUsed):0,i=l?ef(l.sdHoursUsed):0;a=ef(e.vacationBalance)+d-r,s=ef(e.holidayBalance)+c-n,t=ef(e.sickDayBalance)+i-o}else a=ef(e.vacationBalance)-r,s=ef(e.holidayBalance)-n,t=ef(e.sickDayBalance)-o;if("Salaried"===e.payMethod){let a=ef(e.biWeeklySalary);l={employeeId:e.employeeId,name:e.name,payMethod:e.payMethod,totalHoursWorked:0,checkHours:0,otherHours:0,vdHoursUsed:r,hdHoursUsed:n,sdHoursUsed:o,payRateCheck:0,payRateOthers:0,biWeeklySalary:a,otherAdjustment:0,grossCheckAmount:a,grossOtherAmount:0}}else{var d;let a=ef(e.totalHoursWorked),s=ef(e.checkHours),t=ef(e.otherHours),c=ef(e.payRateCheck),i=null!=(d=ef(e.payRateOthers))?d:0;l={employeeId:e.employeeId,name:e.name,payMethod:e.payMethod,totalHoursWorked:a,checkHours:s,otherHours:t,vdHoursUsed:r,hdHoursUsed:n,sdHoursUsed:o,payRateCheck:c,payRateOthers:i,biWeeklySalary:0,otherAdjustment:0,grossCheckAmount:c*s+c*(r+n+o),grossOtherAmount:i*t+0}}return{...l,newVacationBalance:a,newHolidayBalance:s,newSickDayBalance:t}})),Y(!0),P({title:"Payroll Calculated",description:"Review the results below. Finalize by approving.",variant:"default",action:(0,t.jsx)(h.A,{className:"h-4 w-4 text-white"})})}),className:"space-y-6",children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(b.XI,{children:[(0,t.jsx)(b.A0,{children:(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nd,{className:"font-bold min-w-[200px]",children:"Metric"}),ec.map(e=>(0,t.jsx)(b.nd,{className:"text-left",children:e.name},e.id))]})}),(0,t.jsxs)(b.BF,{children:[O.map(e=>(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{className:"font-medium",children:e.label}),ec.map((a,s)=>{var l;let r=(null==(l=ey[s])?void 0:l.payMethod)==="Salaried"&&"vdHoursUsed"!==e.key&&"hdHoursUsed"!==e.key&&"sdHoursUsed"!==e.key;return(0,t.jsx)(b.nA,{className:"text-left p-2",children:(0,t.jsx)(c.zB,{control:ed.control,name:"employees.".concat(s,".").concat(e.key),render:s=>{let{field:l}=s;return(0,t.jsxs)(c.eI,{children:[(0,t.jsxs)(c.lR,{className:"sr-only",children:[e.label," for ",a.name]}),(0,t.jsx)(c.MJ,{children:(0,t.jsx)(i.p,{type:"number",placeholder:"0",...l,...e.props,className:(0,N.cn)("h-8 w-28 text-left",r&&"bg-muted/50"),disabled:r})}),(0,t.jsx)(c.C5,{className:"text-xs mt-1"})]})}})},a.id)})]},e.key)),(0,t.jsxs)(b.Hj,{className:"bg-muted/20 hover:bg-muted/20",children:[(0,t.jsx)(b.nA,{className:"font-medium",children:"Available Balances"}),ec.map((e,a)=>{var s,l,r;return(0,t.jsxs)(b.nA,{className:"text-left pl-4 text-xs text-muted-foreground tabular-nums",children:[(0,t.jsxs)("div",{children:["VD: (",eH(null==(s=ey[a])?void 0:s.vacationBalance),")"]}),(0,t.jsxs)("div",{children:["HD: (",eH(null==(l=ey[a])?void 0:l.holidayBalance),")"]}),(0,t.jsxs)("div",{children:["SD: (",eH(null==(r=ey[a])?void 0:r.sickDayBalance),")"]})]},e.id)})]}),(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{className:"font-medium",children:"Comments"}),ec.map((e,a)=>(0,t.jsx)(b.nA,{className:"text-left",children:(0,t.jsxs)(B.AM,{children:[(0,t.jsx)(B.Wv,{asChild:!0,children:(0,t.jsxs)(d.$,{variant:"outline",size:"sm",children:[(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"View/Edit"]})}),(0,t.jsx)(B.hl,{className:"w-80",children:(0,t.jsx)(c.zB,{control:em,name:"employees.".concat(a,".comment"),render:a=>{var s;let{field:l}=a;return(0,t.jsxs)(c.eI,{className:"grid gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium leading-none",children:"Comment"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Internal note for ",e.name,"."]})]}),(0,t.jsx)(c.MJ,{children:(0,t.jsx)(D.T,{...l,value:null!=(s=l.value)?s:""})}),(0,t.jsx)(c.C5,{})]})}})})]})},e.id))]}),0===ec.length&&(0,t.jsx)(b.Hj,{children:(0,t.jsx)(b.nA,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"No active employees found. Please add an employee first."})})]})]})}),ed.formState.errors.employees&&(0,t.jsxs)(g.Fc,{variant:"destructive",children:[(0,t.jsx)(j.A,{className:"h-4 w-4"}),(0,t.jsx)(g.XL,{children:"Error"}),(0,t.jsx)(g.TN,{children:"Please check the form for errors. Hours may be invalid or exceed available balances."})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4",children:(0,t.jsx)(d.$,{type:"submit",children:"Calculate Payroll"})})]})})})]}),X&&(0,t.jsxs)(u.Zp,{children:[(0,t.jsxs)(u.aR,{children:[(0,t.jsxs)(u.ZB,{className:"flex items-center",children:[(0,t.jsx)(h.A,{className:"mr-2 h-5 w-5 text-accent"})," 3. Review & Approve"]}),(0,t.jsx)(u.BT,{children:"Review the calculated results. Make adjustments if needed, then approve to finalize."})]}),(0,t.jsxs)(u.Wu,{children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(b.XI,{children:[(0,t.jsx)(b.A0,{children:(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nd,{className:"font-bold min-w-[200px]",children:"Metric"}),Z.map(e=>(0,t.jsx)(b.nd,{className:"text-left",children:e.name},e.employeeId))]})}),(0,t.jsxs)(b.BF,{children:[(0,t.jsx)(b.Hj,{children:(0,t.jsx)(b.nA,{colSpan:Z.length+1,className:"p-2 bg-muted/20 font-semibold text-muted-foreground",children:"Hours"})}),(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{children:"Total Hours Worked"}),Z.map(e=>(0,t.jsx)(b.nA,{className:"text-left tabular-nums",children:"Hourly"===e.payMethod?eH(e.totalHoursWorked):"N/A"},e.employeeId))]}),(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{children:"Check Hours"}),Z.map(e=>(0,t.jsx)(b.nA,{className:"text-left tabular-nums",children:"Hourly"===e.payMethod?eH(e.checkHours):"N/A"},e.employeeId))]}),(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{children:"Other Hours"}),Z.map(e=>(0,t.jsx)(b.nA,{className:"text-left tabular-nums",children:"Hourly"===e.payMethod?eH(e.otherHours):"N/A"},e.employeeId))]}),(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{children:"VD Hours Used"}),Z.map(e=>(0,t.jsx)(b.nA,{className:"text-left tabular-nums",children:eH(e.vdHoursUsed)},e.employeeId))]}),(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{children:"HD Hours Used"}),Z.map(e=>(0,t.jsx)(b.nA,{className:"text-left tabular-nums",children:eH(e.hdHoursUsed)},e.employeeId))]}),(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{children:"SD Hours Used"}),Z.map(e=>(0,t.jsx)(b.nA,{className:"text-left tabular-nums",children:eH(e.sdHoursUsed)},e.employeeId))]}),(0,t.jsx)(b.Hj,{children:(0,t.jsx)(b.nA,{colSpan:Z.length+1,className:"p-2 bg-muted/20 font-semibold text-muted-foreground",children:"Pay"})}),(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{children:"Rate/Check"}),Z.map(e=>(0,t.jsx)(b.nA,{className:"text-left tabular-nums",children:"Hourly"===e.payMethod?eb(e.payRateCheck):"N/A"},e.employeeId))]}),(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{children:"Rate/Others"}),Z.map(e=>(0,t.jsx)(b.nA,{className:"text-left tabular-nums",children:"Hourly"===e.payMethod?eb(e.payRateOthers):"N/A"},e.employeeId))]}),(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{children:"Bi-weekly Salary"}),Z.map(e=>(0,t.jsx)(b.nA,{className:"text-left tabular-nums",children:"Salaried"===e.payMethod?eb(e.biWeeklySalary):"N/A"},e.employeeId))]}),(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{children:"Others-ADJ $"}),Z.map(e=>(0,t.jsx)(b.nA,{className:"text-left",children:(0,t.jsx)(i.p,{type:"number",step:"0.01",className:"h-8 w-28",value:e.otherAdjustment,onChange:a=>ej(e.employeeId,a.target.value),disabled:"Salaried"===e.payMethod})},e.employeeId))]}),(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{className:"font-semibold",children:"Gross Check Amount"}),Z.map(e=>(0,t.jsx)(b.nA,{className:"font-semibold text-left tabular-nums",children:eb(e.grossCheckAmount)},e.employeeId))]}),(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{className:"font-semibold",children:"Gross Other Amount"}),Z.map(e=>(0,t.jsx)(b.nA,{className:"font-semibold text-left tabular-nums",children:eb(e.grossOtherAmount)},e.employeeId))]}),(0,t.jsx)(b.Hj,{children:(0,t.jsx)(b.nA,{colSpan:Z.length+1,className:"p-2 bg-muted/20 font-semibold text-muted-foreground",children:"New Balances"})}),(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{children:"New VD Balance"}),Z.map(e=>(0,t.jsxs)(b.nA,{className:"text-left tabular-nums",children:["(",eH(e.newVacationBalance),")"]},e.employeeId))]}),(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{children:"New HD Balance"}),Z.map(e=>(0,t.jsxs)(b.nA,{className:"text-left tabular-nums",children:["(",eH(e.newHolidayBalance),")"]},e.employeeId))]}),(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{children:"New SD Balance"}),Z.map(e=>(0,t.jsxs)(b.nA,{className:"text-left tabular-nums",children:["(",eH(e.newSickDayBalance),")"]},e.employeeId))]})]})]})}),(0,t.jsx)(H.w,{className:"my-6"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Payroll Summary"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-6",children:[(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)(U.J,{children:["GP ",(0,t.jsx)("span",{className:"font-bold",children:eb(Z.reduce((e,a)=>e+a.grossCheckAmount,0))})]})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(U.J,{children:"EMPLOYER"}),(0,t.jsx)(i.p,{value:Q,onChange:e=>ee(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(U.J,{children:"EMPLOYEE"}),(0,t.jsx)(i.p,{value:ea,onChange:e=>es(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(U.J,{children:"DED"}),(0,t.jsx)(i.p,{value:et,onChange:e=>el(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(U.J,{children:"NET"}),(0,t.jsx)(i.p,{value:er,onChange:e=>en(e.target.value)})]}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)(U.J,{children:["OTHERS ",(0,t.jsx)("span",{className:"font-bold",children:eb(Z.reduce((e,a)=>e+a.grossOtherAmount,0))})]})})]})]}),(0,t.jsx)("div",{className:"flex justify-end pt-6",children:(0,t.jsxs)(d.$,{size:"lg",className:"bg-accent text-accent-foreground hover:bg-accent/90",onClick:ev,disabled:J,children:[J?(0,t.jsx)(y.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(v.A,{className:"mr-2 h-4 w-4"}),J?"Saving...":eo?"Update & Finalize":"Approve & Finalize"]})})]})]})]})}},55365:(e,a,s)=>{s.d(a,{Fc:()=>d,TN:()=>i,XL:()=>c});var t=s(95155),l=s(12115),r=s(74466),n=s(59434);let o=(0,r.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=l.forwardRef((e,a)=>{let{className:s,variant:l,...r}=e;return(0,t.jsx)("div",{ref:a,role:"alert",className:(0,n.cn)(o({variant:l}),s),...r})});d.displayName="Alert";let c=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("h5",{ref:a,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",s),...l})});c.displayName="AlertTitle";let i=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",s),...l})});i.displayName="AlertDescription"},85511:(e,a,s)=>{s.d(a,{V:()=>c});var t=s(95155);s(12115);var l=s(965),r=s(73158),n=s(49383),o=s(59434),d=s(30285);function c(e){let{className:a,classNames:s,showOutsideDays:c=!0,...i}=e;return(0,t.jsx)(n.hv,{showOutsideDays:c,className:(0,o.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,o.cn)((0,d.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,o.cn)((0,d.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:e=>{let{className:a,...s}=e;return(0,t.jsx)(l.A,{className:(0,o.cn)("h-4 w-4",a),...s})},IconRight:e=>{let{className:a,...s}=e;return(0,t.jsx)(r.A,{className:(0,o.cn)("h-4 w-4",a),...s})}},...i})}c.displayName="Calendar"}}]);