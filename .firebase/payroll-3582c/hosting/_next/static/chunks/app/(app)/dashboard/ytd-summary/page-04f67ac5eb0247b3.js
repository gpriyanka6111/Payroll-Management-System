(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[153],{285:(e,r,a)=>{"use strict";a.d(r,{$:()=>i,r:()=>o});var s=a(5155),t=a(2115),l=a(9708),n=a(2085),d=a(9434);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=t.forwardRef((e,r)=>{let{className:a,variant:t,size:n,asChild:i=!1,...c}=e,m=i?l.DX:"button";return(0,s.jsx)(m,{className:(0,d.cn)(o({variant:t,size:n,className:a})),ref:r,...c})});i.displayName="Button"},490:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>R});var s=a(5155),t=a(2115),l=a(6695),n=a(5127),d=a(2543),o=a(8390),i=a(1407),c=a(9328),m=a(285),u=a(6874),f=a.n(u),h=a(7600),x=a(5317),p=a(6104),y=a(8856),b=a(3478),N=a(9556),j=a(9434);let v=b.bL,g=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(b.q7,{ref:r,className:(0,j.cn)("border-b",a),...t})});g.displayName="AccordionItem";let w=t.forwardRef((e,r)=>{let{className:a,children:t,...l}=e;return(0,s.jsx)(b.Y9,{className:"flex",children:(0,s.jsxs)(b.l9,{ref:r,className:(0,j.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...l,children:[t,(0,s.jsx)(N.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});w.displayName=b.l9.displayName;let P=t.forwardRef((e,r)=>{let{className:a,children:t,...l}=e;return(0,s.jsx)(b.UC,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,s.jsx)("div",{className:(0,j.cn)("pb-4 pt-0",a),children:t})})});function R(){let{user:e}=(0,h.A)(),[r,a]=t.useState([]),[u,b]=t.useState(!0),[N,j]=t.useState({from:"",to:""});t.useEffect(()=>{let e=new Date,r=(0,i.D)(e);j({from:(0,c.GP)(r,"MMMM d, yyyy"),to:(0,c.GP)(e,"MMMM d, yyyy")})},[]),t.useEffect(()=>{e&&(async()=>{b(!0);let r=(0,x.rJ)(p.db,"users",e.uid,"employees"),s=(0,x.P)(r,(0,x.My)("lastName","asc")),t=(await (0,x.GG)(s)).docs.map(e=>({id:e.id,...e.data()})),l=(0,i.D)(new Date),n=(0,x.rJ)(p.db,"users",e.uid,"payrolls"),d=(0,x.P)(n,(0,x._M)("toDate",">=",(0,c.GP)(l,"yyyy-MM-dd")),(0,x.My)("toDate","asc")),o=(await (0,x.GG)(d)).docs.map(e=>e.data()),m={};t.forEach(e=>{m[e.id]={employeeId:e.id,employeeName:"".concat(e.firstName," ").concat(e.lastName),totalGrossPay:0,payPeriods:[]}}),o.forEach(e=>{e.results.forEach(r=>{if(m[r.employeeId]){let a=(r.grossCheckAmount||0)+(r.grossOtherAmount||0);m[r.employeeId].totalGrossPay+=a;let[s,t,l]=e.fromDate.split("-").map(Number),[n,d,o]=e.toDate.split("-").map(Number),i=new Date(s,t-1,l),u=new Date(n,d-1,o);m[r.employeeId].payPeriods.push({period:"".concat((0,c.GP)(i,"MM/dd/yy")," - ").concat((0,c.GP)(u,"MM/dd/yy")),grossPay:a})}})}),a(Object.values(m)),b(!1)})().catch(console.error)},[e]);let R=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),D=t.useMemo(()=>r.reduce((e,r)=>e+r.totalGrossPay,0),[r]);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(m.$,{variant:"outline",asChild:!0,className:"w-fit",children:(0,s.jsxs)(f(),{href:"/dashboard/manager",children:[(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4"})," Back to Manager Dashboard"]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Year-to-Date Summary"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Review total gross pay for all employees for the current calendar year."})]}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsxs)(l.ZB,{className:"flex items-center",children:[(0,s.jsx)(o.A,{className:"mr-2 h-5 w-5 text-muted-foreground"}),"YTD Earnings Summary"]}),(0,s.jsxs)(l.BT,{children:["Summary of total gross pay from finalized payrolls from ",(0,s.jsx)("span",{className:"font-semibold",children:N.from})," to ",(0,s.jsx)("span",{className:"font-semibold",children:N.to}),"."]})]}),(0,s.jsx)(l.Wu,{children:u?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.E,{className:"h-10 w-full"}),(0,s.jsx)(y.E,{className:"h-10 w-full"}),(0,s.jsx)(y.E,{className:"h-10 w-full"})]}):r.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v,{type:"single",collapsible:!0,className:"w-full",children:r.map(e=>(0,s.jsxs)(g,{value:e.employeeId,children:[(0,s.jsx)(w,{className:"hover:no-underline",children:(0,s.jsxs)("div",{className:"flex justify-between w-full pr-4",children:[(0,s.jsx)("span",{className:"font-medium",children:e.employeeName}),(0,s.jsx)("span",{className:"font-semibold tabular-nums",children:R(e.totalGrossPay)})]})}),(0,s.jsx)(P,{children:(0,s.jsxs)(n.XI,{children:[(0,s.jsx)(n.A0,{children:(0,s.jsxs)(n.Hj,{children:[(0,s.jsx)(n.nd,{children:"Pay Period"}),(0,s.jsx)(n.nd,{className:"text-right",children:"Gross Pay"})]})}),(0,s.jsx)(n.BF,{children:e.payPeriods.map((e,r)=>(0,s.jsxs)(n.Hj,{children:[(0,s.jsx)(n.nA,{children:e.period}),(0,s.jsx)(n.nA,{className:"text-right tabular-nums",children:R(e.grossPay)})]},r))})]})})]},e.employeeId))}),(0,s.jsxs)("div",{className:"flex justify-between font-bold text-lg border-t pt-4 mt-4 pr-4",children:[(0,s.jsx)("span",{children:"Total YTD Gross Pay"}),(0,s.jsx)("span",{className:"tabular-nums",children:R(D)})]})]}):(0,s.jsx)("div",{className:"h-24 text-center flex items-center justify-center text-muted-foreground",children:"No earnings data found for this year."})})]})]})}P.displayName=b.UC.displayName},512:(e,r,a)=>{Promise.resolve().then(a.bind(a,490))},5127:(e,r,a)=>{"use strict";a.d(r,{A0:()=>d,BF:()=>o,Gg:()=>i,Hj:()=>c,XI:()=>n,nA:()=>u,nd:()=>m,r6:()=>f});var s=a(5155),t=a(2115),l=a(9434);let n=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:r,className:(0,l.cn)("w-full caption-bottom text-sm",a),...t})})});n.displayName="Table";let d=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("thead",{ref:r,className:(0,l.cn)("[&_tr]:border-b",a),...t})});d.displayName="TableHeader";let o=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("tbody",{ref:r,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...t})});o.displayName="TableBody";let i=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("tfoot",{ref:r,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...t})});i.displayName="TableFooter";let c=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("tr",{ref:r,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...t})});c.displayName="TableRow";let m=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("th",{ref:r,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...t})});m.displayName="TableHead";let u=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("td",{ref:r,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...t})});u.displayName="TableCell";let f=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("caption",{ref:r,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",a),...t})});f.displayName="TableCaption"},6104:(e,r,a)=>{"use strict";let s,t,l;a.d(r,{db:()=>l,j2:()=>t});var n=a(3915),d=a(3004),o=a(5317);try{s=(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)({apiKey:"AIzaSyAkP18VtzDihlYGJYJoNsH48v83yHobkds",authDomain:"payroll-3582c.firebaseapp.com",projectId:"payroll-3582c",storageBucket:"payroll-3582c.firebasestorage.app",messagingSenderId:"595764753966",appId:"1:595764753966:web:33c2371bf504e8985e91bf",measurementId:"G-9TSQDML6N1"}),t=(0,d.xI)(s),l=(0,o.aU)(s)}catch(e){throw console.error("Firebase initialization error",e),Error("Failed to initialize Firebase. Please check your .env.local file and restart the server.")}},6695:(e,r,a)=>{"use strict";a.d(r,{BT:()=>i,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>d,wL:()=>m});var s=a(5155),t=a(2115),l=a(9434);let n=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...t})});n.displayName="Card";let d=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...t})});d.displayName="CardHeader";let o=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...t})});o.displayName="CardTitle";let i=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",a),...t})});i.displayName="CardDescription";let c=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",a),...t})});c.displayName="CardContent";let m=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",a),...t})});m.displayName="CardFooter"},7600:(e,r,a)=>{"use strict";a.d(r,{A:()=>c,AuthProvider:()=>i});var s=a(5155),t=a(2115),l=a(3004),n=a(6104),d=a(8856);let o=t.createContext(void 0);function i(e){let{children:r}=e,[a,i]=t.useState(null),[c,m]=t.useState(!0);return(t.useEffect(()=>{let e=(0,l.hg)(n.j2,e=>{i(e),m(!1)},e=>{console.error("Auth state change error:",e),m(!1)});return()=>e()},[]),c)?(0,s.jsx)("div",{className:"flex h-screen w-screen items-center justify-center",children:(0,s.jsxs)("div",{className:"w-1/2 space-y-4",children:[(0,s.jsx)(d.E,{className:"h-12 w-full"}),(0,s.jsx)(d.E,{className:"h-32 w-full"}),(0,s.jsx)(d.E,{className:"h-32 w-full"})]})}):(0,s.jsx)(o.Provider,{value:{user:a,loading:c},children:r})}function c(){let e=t.useContext(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8856:(e,r,a)=>{"use strict";a.d(r,{E:()=>l});var s=a(5155),t=a(9434);function l(e){let{className:r,...a}=e;return(0,s.jsx)("div",{className:(0,t.cn)("animate-pulse rounded-md bg-muted",r),...a})}},9434:(e,r,a)=>{"use strict";a.d(r,{cn:()=>l});var s=a(2596),t=a(9688);function l(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,t.QP)((0,s.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[992,416,668,873,874,328,962,441,684,358],()=>r(512)),_N_E=e.O()}]);