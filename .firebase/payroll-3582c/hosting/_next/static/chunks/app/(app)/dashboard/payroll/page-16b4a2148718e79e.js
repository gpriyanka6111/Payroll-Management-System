(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[918],{3638:(e,s,l)=>{"use strict";l.d(s,{A:()=>t});let t=(0,l(157).A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},3655:(e,s,l)=>{"use strict";l.d(s,{hO:()=>d,sG:()=>i});var t=l(2115),a=l(7650),r=l(9708),n=l(5155),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,s)=>{let l=t.forwardRef((e,l)=>{let{asChild:t,...a}=e,i=t?r.DX:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(i,{...a,ref:l})});return l.displayName=`Primitive.${s}`,{...e,[s]:l}},{});function d(e,s){e&&a.flushSync(()=>e.dispatchEvent(s))}},3781:(e,s,l)=>{Promise.resolve().then(l.bind(l,5490))},5490:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>N});var t=l(5155),a=l(2115),r=l(3013),n=l(6874),i=l.n(n),d=l(285),c=l(6695),o=l(2543);let h=(0,l(157).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);var u=l(3638),x=l(5943),m=l(7223),p=l(7600),y=l(5317),f=l(6104),j=l(8856),v=l(7481),b=l(7349);function N(){let{user:e}=(0,p.A)(),{toast:s}=(0,v.dj)(),[l,n]=a.useState([]),[N,w]=a.useState(!0),[g,k]=a.useState(null);a.useEffect(()=>{if(!e)return;let s=(0,y.rJ)(f.db,"users",e.uid,"payrolls"),l=(0,y.P)(s,(0,y.My)("toDate","desc")),t=(0,y.aQ)(l,e=>{n(e.docs.map(e=>({id:e.id,...e.data()}))),w(!1)},()=>w(!1));return()=>t()},[e]);let D=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),P=e=>{let[s,l,t]=e.split("-").map(Number),a=new Date(s,l-1,t);return(0,r.GP)(a,"MMMM d, yyyy")},A=async()=>{if(e&&g)try{let l=(0,y.H9)(f.db,"users",e.uid,"payrolls",g.id);await (0,y.kd)(l),s({title:"Payroll Deleted",description:"The payroll for ".concat(P(g.fromDate)," - ").concat(P(g.toDate)," has been deleted."),variant:"destructive"})}catch(e){console.error("Error deleting payroll: ",e),s({title:"Delete Failed",description:"Could not delete the payroll record.",variant:"destructive"})}finally{k(null)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(d.$,{variant:"outline",asChild:!0,className:"w-fit",children:(0,t.jsxs)(i(),{href:"/dashboard",children:[(0,t.jsx)(o.A,{className:"mr-2 h-4 w-4"})," Back to Dashboard"]})}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Payroll"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Run new payroll or review past history."})]}),(0,t.jsx)(d.$,{asChild:!0,variant:"default",className:"bg-accent text-accent-foreground hover:bg-accent/90",children:(0,t.jsxs)(i(),{href:"/dashboard/payroll/run",children:[(0,t.jsx)(h,{className:"mr-2 h-4 w-4"})," Run New Payroll"]})})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center",children:[(0,t.jsx)(u.A,{className:"mr-2 h-5 w-5 text-muted-foreground"})," Payroll History"]}),(0,t.jsx)(c.BT,{children:"Review past payroll runs."})]}),(0,t.jsx)(c.Wu,{children:N?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(j.E,{className:"h-16 w-full"}),(0,t.jsx)(j.E,{className:"h-16 w-full"}),(0,t.jsx)(j.E,{className:"h-16 w-full"})]}):l.length>0?(0,t.jsx)("ul",{className:"space-y-3",children:l.map(e=>(0,t.jsxs)("li",{className:"flex justify-between items-center p-3 border rounded-md hover:bg-muted/50 transition-colors",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium",children:["Payroll Run: ",P(e.fromDate)," - ",P(e.toDate)]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Status: ",e.status]})]}),(0,t.jsxs)("div",{className:"text-right flex items-center space-x-2",children:[(0,t.jsx)("p",{className:"font-semibold",children:D(e.totalAmount)}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(d.$,{variant:"ghost",size:"icon",asChild:!0,children:(0,t.jsx)(i(),{href:"/dashboard/payroll/run?id=".concat(e.id),"aria-label":"Edit Payroll",children:(0,t.jsx)(x.A,{className:"h-4 w-4"})})}),(0,t.jsx)(d.$,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>k(e),"aria-label":"Delete Payroll",children:(0,t.jsx)(m.A,{className:"h-4 w-4"})}),(0,t.jsx)(d.$,{variant:"link",size:"sm",className:"p-0 h-auto text-xs",asChild:!0,children:(0,t.jsx)(i(),{href:"/dashboard/payroll/report?id=".concat(e.id),children:"View Details"})})]})]})]},e.id))}):(0,t.jsx)("p",{className:"text-center text-muted-foreground py-10",children:"No past payroll runs found."})})]}),(0,t.jsx)(b.Lt,{open:!!g,onOpenChange:e=>!e&&k(null),children:(0,t.jsxs)(b.EO,{children:[(0,t.jsxs)(b.wd,{children:[(0,t.jsx)(b.r7,{children:"Are you absolutely sure?"}),(0,t.jsxs)(b.$v,{children:["This action cannot be undone. This will permanently delete the payroll record for the period"," ",(0,t.jsx)("span",{className:"font-semibold",children:g?"".concat(P(g.fromDate)," - ").concat(P(g.toDate)):""}),".",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"Employee PTO balances will ",(0,t.jsx)("span",{className:"font-semibold text-destructive",children:"not"})," be changed."]})]}),(0,t.jsxs)(b.ck,{children:[(0,t.jsx)(b.Zr,{children:"Cancel"}),(0,t.jsx)(b.Rx,{onClick:A,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Yes, delete payroll"})]})]})})]})}},5943:(e,s,l)=>{"use strict";l.d(s,{A:()=>t});let t=(0,l(157).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[992,416,114,874,263,13,452,556,441,684,358],()=>s(3781)),_N_E=e.O()}]);