(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[593],{285:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>i});var s=r(5155),a=r(2115),l=r(9708),n=r(2085),o=r(9434);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:d=!1,...c}=e,u=d?l.DX:"button";return(0,s.jsx)(u,{className:(0,o.cn)(i({variant:a,size:n,className:r})),ref:t,...c})});d.displayName="Button"},286:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(157).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},679:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(157).A)("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]])},1581:()=>{},1976:()=>{},2543:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(157).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3290:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var s=r(5155),a=r(2115),l=r(285),n=r(9100),o=r(9434),i=r(6695),d=r(5127),c=r(1784);let u=e=>"number"!=typeof e||isNaN(e)?"$ --.--":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),m=e=>"number"!=typeof e||isNaN(e)?"--":e.toFixed(2);function h(e){let{companyName:t,payPeriod:r,result:a,input:l,ytdGrossPay:o}=e,h=[{description:"Regular Pay",hours:a.checkHours,rate:a.payRateCheck,total:a.checkHours*a.payRateCheck},{description:"PTO Pay",hours:a.ptoUsed,rate:a.payRateCheck,total:a.ptoUsed*a.payRateCheck},{description:"Other Pay",hours:a.otherHours,rate:a.payRateOthers,total:a.otherHours*a.payRateOthers},{description:"Other Adjustments",hours:"-",rate:"-",total:a.otherAdjustment}].filter(e=>0!==e.total||"Other Adjustments"===e.description&&0!==e.total),p=a.grossCheckAmount+a.grossOtherAmount,f=o+p;return(0,s.jsxs)(i.Zp,{className:"payslip-card shadow-md break-inside-avoid border border-border print:shadow-none print:border-gray-300",children:[(0,s.jsx)(i.aR,{children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(i.ZB,{className:"text-xl text-primary",children:a.name}),(0,s.jsxs)(i.BT,{children:[t," Payslip"]})]}),(0,s.jsxs)("div",{className:"text-right text-xs",children:[(0,s.jsx)("p",{className:"font-semibold",children:"Pay Period:"}),(0,s.jsxs)("p",{className:"text-muted-foreground",children:[(0,c.GP)(r.from,"MM/dd/yy")," - ",(0,c.GP)(r.to,"MM/dd/yy")]}),(0,s.jsx)("p",{className:"font-semibold mt-1",children:"Pay Date:"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:(0,c.GP)(new Date,"MM/dd/yyyy")})]})]})}),(0,s.jsxs)(i.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-semibold mb-2",children:"Hours Summary (hrs)"}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-center border rounded-md p-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total"}),(0,s.jsx)("p",{className:"font-medium tabular-nums",children:m(a.totalHoursWorked)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Check"}),(0,s.jsx)("p",{className:"font-medium tabular-nums",children:m(a.checkHours)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Other"}),(0,s.jsx)("p",{className:"font-medium tabular-nums",children:m(a.otherHours)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"PTO"}),(0,s.jsx)("p",{className:"font-medium tabular-nums",children:m(a.ptoUsed)})]})]})]}),(0,s.jsx)(n.w,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-semibold mb-2",children:"Earnings"}),(0,s.jsxs)(d.XI,{children:[(0,s.jsx)(d.A0,{children:(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nd,{children:"Description"}),(0,s.jsx)(d.nd,{className:"text-right",children:"Current"}),(0,s.jsx)(d.nd,{className:"text-right",children:"YTD"})]})}),(0,s.jsxs)(d.BF,{children:[h.map((e,t)=>(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nA,{children:e.description}),(0,s.jsx)(d.nA,{className:"text-right tabular-nums",children:u(e.total)}),(0,s.jsx)(d.nA,{className:"text-right tabular-nums",children:"-"})]},t)),(0,s.jsxs)(d.Hj,{className:"font-semibold",children:[(0,s.jsx)(d.nA,{children:"Gross Pay"}),(0,s.jsx)(d.nA,{className:"text-right tabular-nums",children:u(p)}),(0,s.jsx)(d.nA,{className:"text-right tabular-nums",children:u(f)})]})]})]})]}),(0,s.jsx)(n.w,{}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Deductions"}),(0,s.jsx)("span",{className:"font-semibold tabular-nums",children:u(0)})]})})]}),(0,s.jsx)(i.wL,{children:(0,s.jsxs)("div",{className:"flex justify-between w-full p-3 bg-muted/50 rounded-lg",children:[(0,s.jsx)("span",{className:"text-lg font-bold",children:"Gross Pay"}),(0,s.jsx)("span",{className:"text-lg font-bold tabular-nums",children:u(p)})]})})]})}var p=r(4861),f=r(1407),y=r(1876);let x={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},N=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,g=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,j=/^([+-])(\d{2})(?::?(\d{2}))?$/;function b(e){return e?parseInt(e):1}function v(e){return e&&parseFloat(e.replace(",","."))||0}let w=[31,null,31,30,31,30,31,31,30,31,30,31];function k(e){return e%400==0||e%4==0&&e%100!=0}var E=r(7860),A=r(9233),O=r(9340),P=r(2543),R=r(5943),S=r(679),T=r(286),H=r(5695),D=r(8856),C=r(7600),M=r(5317),I=r(6104),G=r(6874),U=r.n(G),_=r(5035);let F=e=>{let t=Number(e);return isNaN(t)?"$ --.--":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)},z=e=>{let t=Number(e);return isNaN(t)?"--":t.toFixed(2)};function L(){let e=(0,H.useRouter)(),t=(0,H.useSearchParams)(),{user:r}=(0,C.A)(),i=t.get("id"),[u,m]=a.useState([]),[G,L]=a.useState([]),[B,$]=a.useState(null),[Z,J]=a.useState(!0),[K,V]=a.useState("My Small Business"),[Y,W]=a.useState({}),[X,q]=a.useState({});if(a.useEffect(()=>{let t=async()=>{let t,s,a;if(J(!0),!r)return void J(!1);if(i)try{let e=(0,M.H9)(I.db,"users",r.uid),l=await (0,M.x7)(e);l.exists()&&V(l.data().companyName||"My Small Business");let n=(0,M.H9)(I.db,"users",r.uid,"payrolls",i),o=await (0,M.x7)(n);if(o.exists()){let[e,r,l]=(t=o.data()).fromDate.split("-").map(Number),[n,i,d]=t.toDate.split("-").map(Number);s=new Date(e,r-1,l),a=new Date(n,i-1,d),m(t.results),L(t.inputs),$({from:s,to:a}),W({employer:t.summaryEmployer,employee:t.summaryEmployee,deductions:t.summaryDeductions,netPay:t.summaryNetPay})}else throw Error("Payroll document not found.")}catch(t){console.error("Error fetching payroll data:",t),e.replace("/dashboard/payroll");return}else{let r=sessionStorage.getItem("payrollResultsData"),l=sessionStorage.getItem("payrollPeriodData"),n=sessionStorage.getItem("payrollInputData"),o=sessionStorage.getItem("companyName"),i=sessionStorage.getItem("payrollSummaryData");if(!r||!l||!n)return void e.replace("/dashboard/payroll/run");{let d=JSON.parse(l);if(s=new Date(d.from),a=new Date(d.to),!(0,p.f)(s)||!(0,p.f)(a))return void e.replace("/dashboard/payroll/run");m((t={results:JSON.parse(r),inputs:JSON.parse(n),fromDate:(0,c.GP)(s,"yyyy-MM-dd")}).results),L(t.inputs),$({from:s,to:a}),i&&W(JSON.parse(i)),o&&V(o),sessionStorage.removeItem("payrollResultsData"),sessionStorage.removeItem("payrollPeriodData"),sessionStorage.removeItem("payrollInputData"),sessionStorage.removeItem("companyName"),sessionStorage.removeItem("payrollSummaryData")}}let l=(0,f.D)(s),n=(0,M.rJ)(I.db,"users",r.uid,"payrolls"),o=(0,M.P)(n,(0,M._M)("toDate",">=",(0,c.GP)(l,"yyyy-MM-dd")),(0,M._M)("toDate","<",t.fromDate),(0,M.My)("toDate","asc")),d=await (0,M.GG)(o),u={};t.results.forEach(e=>{u[e.employeeId]={grossPay:0}}),d.forEach(e=>{e.data().results.forEach(e=>{if(u[e.employeeId]){let t=e.grossCheckAmount+e.grossOtherAmount;u[e.employeeId].grossPay+=t}})}),q(u),J(!1)};r&&t()},[e,i,r]),Z)return(0,s.jsxs)("div",{className:"space-y-4 p-6",children:[(0,s.jsx)(D.E,{className:"h-10 w-1/4"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(D.E,{className:"h-48 w-full"}),(0,s.jsx)(D.E,{className:"h-64 w-full"}),(0,s.jsx)(D.E,{className:"h-32 w-full"})]})]});if(!B||0===u.length||0===G.length)return(0,s.jsxs)("div",{className:"text-center py-10",children:[(0,s.jsx)("p",{children:"No payroll data found or you do not have permission to view it."}),(0,s.jsx)(l.$,{onClick:()=>e.push("/dashboard/payroll/run"),children:"Start a new payroll run"})]});let Q={totalGrossPay:u.reduce((e,t)=>e+t.grossCheckAmount+t.grossOtherAmount,0),totalNetPay:u.reduce((e,t)=>e+t.grossCheckAmount,0),totalOtherPay:u.reduce((e,t)=>e+t.grossOtherAmount,0),totalEmployees:u.length},ee=async()=>{var e,t,s,a,l;if(!B||!u.length||!r)return;let n=(0,M.H9)(I.db,"users",r.uid),o=await (0,M.x7)(n),i=!!o.exists()&&(null==(e=o.data().storeTimings)?void 0:e.sundayClosed)===!0,d=new Date(B.to);d.setHours(23,59,59,999);let m={};for(let e of G){m[e.employeeId]=[];let t=(0,M.rJ)(I.db,"users",r.uid,"employees",e.employeeId,"timeEntries"),s=(0,M.P)(t,(0,M._M)("timeIn",">=",B.from),(0,M._M)("timeIn","<=",d)),a=await (0,M.GG)(s),l={};for(let t in a.forEach(e=>{let t=e.data(),r=(0,c.GP)(t.timeIn.toDate(),"yyyy-MM-dd");if(l[r]||(l[r]={totalMinutes:0,entries:[]}),t.timeOut){let e=Math.round((t.timeOut.toDate().getTime()-t.timeIn.toDate().getTime())/6e4);l[r].totalMinutes+=e>0?e:0}l[r].entries.push({timeIn:t.timeIn,timeOut:t.timeOut})}),l){let r=function(e,t){var r;let s,a,l=2,n=function(e){let t,r={},s=e.split(x.dateTimeDelimiter);if(s.length>2)return r;if(/:/.test(s[0])?t=s[0]:(r.date=s[0],t=s[1],x.timeZoneDelimiter.test(r.date)&&(r.date=e.split(x.timeZoneDelimiter)[0],t=e.substr(r.date.length,e.length))),t){let e=x.timezone.exec(t);e?(r.time=t.replace(e[1],""),r.timezone=e[1]):r.time=t}return r}(e);if(n.date){let e=function(e,t){let r=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(r);if(!s)return{year:NaN,restDateString:""};let a=s[1]?parseInt(s[1]):null,l=s[2]?parseInt(s[2]):null;return{year:null===l?a:100*l,restDateString:e.slice((s[1]||s[2]).length)}}(n.date,l);s=function(e,t){var r,s,a,l,n,o,i,d;if(null===t)return new Date(NaN);let c=e.match(N);if(!c)return new Date(NaN);let u=!!c[4],m=b(c[1]),h=b(c[2])-1,p=b(c[3]),f=b(c[4]),y=b(c[5])-1;if(u){return(r=0,s=f,a=y,s>=1&&s<=53&&a>=0&&a<=6)?function(e,t,r){let s=new Date(0);s.setUTCFullYear(e,0,4);let a=s.getUTCDay()||7;return s.setUTCDate(s.getUTCDate()+((t-1)*7+r+1-a)),s}(t,f,y):new Date(NaN)}{let e=new Date(0);return(l=t,n=h,o=p,n>=0&&n<=11&&o>=1&&o<=(w[n]||(k(l)?29:28))&&(i=t,(d=m)>=1&&d<=(k(i)?366:365)))?(e.setUTCFullYear(t,h,Math.max(m,p)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);let o=s.getTime(),i=0;if(n.time&&isNaN(i=function(e){var t,r,s;let a=e.match(g);if(!a)return NaN;let l=v(a[1]),n=v(a[2]),o=v(a[3]);return(t=l,r=n,s=o,24===t?0===r&&0===s:s>=0&&s<60&&r>=0&&r<60&&t>=0&&t<25)?l*y.s0+n*y.Cg+1e3*o:NaN}(n.time)))return new Date(NaN);if(n.timezone){if(isNaN(a=function(e){var t,r;if("Z"===e)return 0;let s=e.match(j);if(!s)return 0;let a="+"===s[1]?-1:1,l=parseInt(s[2]),n=s[3]&&parseInt(s[3])||0;return(t=0,(r=n)>=0&&r<=59)?a*(l*y.s0+n*y.Cg):NaN}(n.timezone)))return new Date(NaN)}else{let e=new Date(o+i),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return new Date(o+i+a)}(t+"T12:00:00");(0,p.f)(r)&&m[e.employeeId].push({date:r,totalHours:l[t].totalMinutes/60,entries:l[t].entries})}}let h=_.utils.book_new(),f=[];f.push(["".concat(K," - Pay Period: ").concat((0,c.GP)(B.from,"LLL dd, yyyy")," - ").concat((0,c.GP)(B.to,"LLL dd, yyyy"))]),f.push(["Date","Metric",...G.map(e=>e.name.toUpperCase())]);let P=2;(0,E.k)({start:B.from,end:B.to}).forEach(e=>{let t=(0,A.P)(e);if(i&&0===t)return;let r=[(0,c.GP)(e,"eee, MMM dd"),"In:"],s=["","Out:"],a=["","Total:"];G.forEach(t=>{var l;let n=null==(l=m[t.employeeId])?void 0:l.find(t=>(0,O.r)(t.date,e)),o="-",i="-",d="-";if(n){if(n.entries.length>1)o="Multiple",i="Multiple";else if(1===n.entries.length){let e=n.entries[0];o=e.timeIn?(0,c.GP)(e.timeIn.toDate(),"p"):"-",i=e.timeOut?(0,c.GP)(e.timeOut.toDate(),"p"):e.timeIn?"ACTIVE":"-"}d=n.totalHours>0?parseFloat(n.totalHours.toFixed(2)):"-"}r.push(o),s.push(i),a.push(d)}),f.push(r,s,a),P+=3});let R=["Total Hours",null,...G.map(e=>(m[e.employeeId]||[]).reduce((e,t)=>e+t.totalHours,0)).map(e=>e>0?parseFloat(e.toFixed(2)):"")];f.push(R);let S=[{label:"COMMENTS",key:"comment",type:"input"},{label:"CHECK HOURS",key:"checkHours",type:"input",format:"hours"},{label:"OTHER HOURS",key:"otherHours",type:"input",format:"hours"},{label:"RATE/CHECK",key:"payRateCheck",type:"result",format:"currency"},{label:"RATE/OTHERS",key:"payRateOthers",type:"result",format:"currency"},{label:"OTHER-ADJ$",key:"otherAdjustment",type:"result",format:"currency"}];S.forEach(e=>{let t=[e.label,null];G.forEach(r=>{let s="input"===e.type?r:u.find(e=>e.employeeId===r.employeeId),a=s?s[e.key]:void 0;null!=a&&""!==a?"currency"===e.format?a=F(a):"hours"===e.format&&(a=z(a)):a="",t.push(a)}),f.push(t)}),f.push([null,null,...G.map(e=>e.name.toUpperCase())]);let T=[{label:"GROSS CHECK AMOUNT",key:"grossCheckAmount"},{label:"GROSS OTHER AMOUNT",key:"grossOtherAmount"}];T.forEach(e=>{let t=[e.label,null];u.forEach(r=>{let s=r[e.key];t.push("number"==typeof s?F(s):"")}),f.push(t)}),f.push(["GP","EMPLOYER","EMPLOYEE","DED","NET","OTHERS"]),f.push([F(Q.totalNetPay),Y.employer||"",Y.employee||"",Y.deductions||"",Y.netPay||"",F(Q.totalOtherPay)]);let H=_.utils.aoa_to_sheet(f),D=[{s:{r:0,c:0},e:{r:0,c:2+G.length-1}}];for(let e=2;e<f.length;e+=3){let r=null==(t=f[e])?void 0:t[0];if("string"==typeof r&&r.match(/^[A-Za-z]{3}, [A-Za-z]{3} \d{2}$/))D.push({s:{r:e,c:0},e:{r:e+2,c:0}});else break}f.forEach((e,t)=>{["Total Hours",...S.map(e=>e.label),...T.map(e=>e.label)].includes(e[0])&&D.push({s:{r:t,c:0},e:{r:t,c:1}})}),H["!merges"]=D;let C={border:{top:{style:"thick"},bottom:{style:"thick"},left:{style:"thick"},right:{style:"thick"}}},U=_.utils.decode_range(H["!ref"]||"A1");for(let e=U.s.r;e<=U.e.r;++e)for(let t=U.s.c;t<=U.e.c;++t){let r={c:t,r:e},n=_.utils.encode_cell(r);H[n]||(H[n]={t:"s",v:""});let o=H[n],i=o.s||{};0===e?i={font:{bold:!0,sz:14},alignment:{horizontal:"center",vertical:"center"},...C}:1===e&&(i={...i,...C});let d=null==(s=H[_.utils.encode_cell({c:1,r:e})])?void 0:s.v;if("string"==typeof d)if("Total:"===d)for(let t=0;t<=U.e.c;t++){let r=_.utils.encode_cell({c:t,r:e});H[r]||(H[r]={t:"s",v:""}),H[r].s={...H[r].s||{},...C}}else 1===t&&("In:"===d||"Out:"===d)&&(i={...i,...C});if(t>1&&d&&("In:"===d||"Out:"===d)&&(i.border={...i.border||{},right:{style:"thick"}}),new Set(["Total Hours","COMMENTS","CHECK HOURS","OTHER HOURS","RATE/CHECK","RATE/OTHERS","OTHER-ADJ$","GROSS CHECK AMOUNT","GROSS OTHER AMOUNT","GP"]).has(null==(a=f[e])?void 0:a[0]))for(let t=0;t<=U.e.c;t++){let r=_.utils.encode_cell({c:t,r:e});H[r]||(H[r]={t:"s",v:""}),H[r].s={...H[r].s||{},...C}}if("GP"===(null==(l=f[f.length-2])?void 0:l[0])&&e===f.length-1)for(let t=0;t<=U.e.c;t++){let r=_.utils.encode_cell({c:t,r:e});H[r]||(H[r]={t:"s",v:""}),H[r].s={...H[r].s||{},...C}}o.s=i}let L=new Set(["Total Hours","COMMENTS","CHECK HOURS","OTHER HOURS","RATE/CHECK","RATE/OTHERS","OTHER-ADJ$","GROSS CHECK AMOUNT","GROSS OTHER AMOUNT","GP"]),$=f.map((e,t)=>{if(0===t)return{hpt:30};let r=e[0],s=t===f.length-4&&e[2];return"string"==typeof r&&L.has(r)||s||t===f.length-1?{hpt:25}:{}});H["!rows"]=$,H["!cols"]=[{wch:15},{wch:8},...Array(G.length).fill({wch:15})],_.utils.book_append_sheet(h,H,"Timesheet Report");let Z="Payroll_Timesheet_".concat((0,c.GP)(B.from,"yyyy-MM-dd"),"_to_").concat((0,c.GP)(B.to,"yyyy-MM-dd"),".xlsx");_.writeFile(h,Z)},et=[{label:"Rate/Check",getValue:e=>F(e.payRateCheck)+"/hr"},{label:"Rate/Others",getValue:e=>F(e.payRateOthers)+"/hr"},{label:"Others-ADJ $",getValue:e=>F(e.otherAdjustment)},{label:"Gross Check Amount",getValue:e=>F(e.grossCheckAmount),isBold:!0},{label:"Gross Other Amount",getValue:e=>F(e.grossOtherAmount),isBold:!0},{label:"New PTO Balance",getValue:e=>"(".concat(z(e.newPtoBalance),")")}];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"report-actions flex justify-between items-center",children:[(0,s.jsxs)(l.$,{variant:"outline",onClick:()=>e.back(),children:[(0,s.jsx)(P.A,{className:"mr-2 h-4 w-4"})," Back"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[i&&(0,s.jsx)(l.$,{variant:"outline",asChild:!0,children:(0,s.jsxs)(U(),{href:"/dashboard/payroll/run?id=".concat(i),children:[(0,s.jsx)(R.A,{className:"mr-2 h-4 w-4"})," Edit"]})}),(0,s.jsxs)(l.$,{variant:"outline",onClick:ee,children:[(0,s.jsx)(S.A,{className:"mr-2 h-4 w-4"})," Export"]})]})]}),(0,s.jsxs)("div",{className:"report-content-wrapper border rounded-lg p-6 bg-card text-card-foreground",children:[(0,s.jsxs)("header",{className:"report-header text-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:K}),(0,s.jsx)("p",{className:"text-lg text-muted-foreground",children:"Payroll Report"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Pay Period: ",(0,c.GP)(B.from,"LLL dd, y")," - ",(0,c.GP)(B.to,"LLL dd,y")]})]}),(0,s.jsx)(n.w,{className:"my-6"}),(0,s.jsxs)("section",{className:"mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Payroll Inputs"}),(0,s.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,s.jsxs)(d.XI,{children:[(0,s.jsx)(d.A0,{children:(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nd,{className:"font-bold min-w-[200px]",children:"Metric"}),G.map(e=>(0,s.jsx)(d.nd,{className:"text-right min-w-[150px]",children:e.name},e.employeeId))]})}),(0,s.jsx)(d.BF,{children:[{key:"totalHoursWorked",label:"TOTAL HOURS WORKED"},{key:"checkHours",label:"CHECK HOURS"},{key:"otherHours",label:"OTHER HOURS"},{key:"ptoUsed",label:"PTO USED"}].map(e=>(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nA,{className:"font-medium",children:e.label}),G.map(t=>(0,s.jsx)(d.nA,{className:"text-right tabular-nums",children:"ptoUsed"===e.key?"(".concat(z(t[e.key]),")"):z(t[e.key])},t.employeeId))]},e.key))})]})})]}),(0,s.jsx)(n.w,{className:"my-6"}),(0,s.jsxs)("section",{className:"mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Payroll Results"}),(0,s.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,s.jsxs)(d.XI,{children:[(0,s.jsx)(d.A0,{children:(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nd,{className:"font-bold min-w-[200px]",children:"Metric"}),u.map(e=>(0,s.jsx)(d.nd,{className:"text-right min-w-[150px]",children:e.name},e.employeeId))]})}),(0,s.jsx)(d.BF,{children:et.map(e=>(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nA,{className:(0,o.cn)("font-medium",e.isBold&&"font-bold"),children:e.label}),u.map(t=>(0,s.jsx)(d.nA,{className:(0,o.cn)("text-right tabular-nums",{"font-semibold":e.isBold}),children:e.getValue(t)},t.employeeId))]},e.label))})]})})]}),(0,s.jsx)(n.w,{className:"my-6"}),(0,s.jsx)("section",{children:(0,s.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,s.jsxs)(d.XI,{children:[(0,s.jsx)(d.A0,{children:(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nd,{children:"GP"}),(0,s.jsx)(d.nd,{children:"EMPLOYER"}),(0,s.jsx)(d.nd,{children:"EMPLOYEE"}),(0,s.jsx)(d.nd,{children:"DED"}),(0,s.jsx)(d.nd,{children:"NET"}),(0,s.jsx)(d.nd,{children:"OTHERS"})]})}),(0,s.jsx)(d.BF,{children:(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nA,{className:"font-semibold tabular-nums",children:F(Q.totalNetPay)}),(0,s.jsx)(d.nA,{children:Y.employer||""}),(0,s.jsx)(d.nA,{children:Y.employee||""}),(0,s.jsx)(d.nA,{children:Y.deductions||""}),(0,s.jsx)(d.nA,{children:Y.netPay||""}),(0,s.jsx)(d.nA,{className:"font-semibold tabular-nums",children:F(Q.totalOtherPay)})]})})]})})})]}),(0,s.jsxs)("div",{className:"payslip-section mt-8 printable-section",children:[(0,s.jsx)("header",{className:"flex items-center justify-between mb-6",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold flex items-center",children:[(0,s.jsx)(T.A,{className:"mr-2 h-5 w-5"})," Individual Payslips"]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"A payslip for each employee included in this payroll run."})]})}),(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 print:grid-cols-1",children:u.map(e=>{let t=G.find(t=>t.employeeId===e.employeeId);if(!t)return null;let r=X[e.employeeId]||{grossPay:0};return(0,s.jsx)(h,{companyName:K,payPeriod:B,result:e,input:t,ytdGrossPay:r.grossPay},e.employeeId)})})]})]})}function B(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"flex h-screen items-center justify-center",children:"Loading Report..."}),children:(0,s.jsx)(L,{})})}},3655:(e,t,r)=>{"use strict";r.d(t,{hO:()=>i,sG:()=>o});var s=r(2115),a=r(7650),l=r(9708),n=r(5155),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=s.forwardRef((e,r)=>{let{asChild:s,...a}=e,o=s?l.DX:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(o,{...a,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function i(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}},3872:(e,t,r)=>{Promise.resolve().then(r.bind(r,3290))},3983:()=>{},4660:()=>{},5127:(e,t,r)=>{"use strict";r.d(t,{A0:()=>o,BF:()=>i,Gg:()=>d,Hj:()=>c,XI:()=>n,nA:()=>m,nd:()=>u,r6:()=>h});var s=r(5155),a=r(2115),l=r(9434);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",r),...a})})});n.displayName="Table";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",r),...a})});o.displayName="TableHeader";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",r),...a})});i.displayName="TableBody";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})});d.displayName="TableFooter";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});c.displayName="TableRow";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...a})});u.displayName="TableHead";let m=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...a})});m.displayName="TableCell";let h=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",r),...a})});h.displayName="TableCaption"},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},5943:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(157).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},6104:(e,t,r)=>{"use strict";let s,a,l;r.d(t,{db:()=>l,j2:()=>a});var n=r(3915),o=r(3004),i=r(5317);try{s=(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)({apiKey:"AIzaSyAkP18VtzDihlYGJYJoNsH48v83yHobkds",authDomain:"payroll-3582c.firebaseapp.com",projectId:"payroll-3582c",storageBucket:"payroll-3582c.firebasestorage.app",messagingSenderId:"595764753966",appId:"1:595764753966:web:33c2371bf504e8985e91bf",measurementId:"G-9TSQDML6N1"}),a=(0,o.xI)(s),l=(0,i.aU)(s)}catch(e){throw console.error("Firebase initialization error",e),Error("Failed to initialize Firebase. Please check your .env.local file and restart the server.")}},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>o,wL:()=>u});var s=r(5155),a=r(2115),l=r(9434);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});n.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...a})});o.displayName="CardHeader";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});i.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},7600:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>d});var s=r(5155),a=r(2115),l=r(3004),n=r(6104),o=r(8856);let i=a.createContext(void 0);function d(e){let{children:t}=e,[r,d]=a.useState(null),[c,u]=a.useState(!0);return(a.useEffect(()=>{let e=(0,l.hg)(n.j2,e=>{d(e),u(!1)},e=>{console.error("Auth state change error:",e),u(!1)});return()=>e()},[]),c)?(0,s.jsx)("div",{className:"flex h-screen w-screen items-center justify-center",children:(0,s.jsxs)("div",{className:"w-1/2 space-y-4",children:[(0,s.jsx)(o.E,{className:"h-12 w-full"}),(0,s.jsx)(o.E,{className:"h-32 w-full"}),(0,s.jsx)(o.E,{className:"h-32 w-full"})]})}):(0,s.jsx)(i.Provider,{value:{user:r,loading:c},children:t})}function c(){let e=a.useContext(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7860:(e,t,r)=>{"use strict";r.d(t,{k:()=>a});var s=r(5476);function a(e,t){var r;let a=(0,s.a)(e.start),l=(0,s.a)(e.end),n=+a>+l,o=n?+a:+l,i=n?l:a;i.setHours(0,0,0,0);let d=null!=(r=null==t?void 0:t.step)?r:1;if(!d)return[];d<0&&(d=-d,n=!n);let c=[];for(;+i<=o;)c.push((0,s.a)(i)),i.setDate(i.getDate()+d),i.setHours(0,0,0,0);return n?c.reverse():c}},8856:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var s=r(5155),a=r(9434);function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",t),...r})}},9100:(e,t,r)=>{"use strict";r.d(t,{w:()=>c});var s=r(5155),a=r(2115),l=r(3655),n="horizontal",o=["horizontal","vertical"],i=a.forwardRef((e,t)=>{var r;let{decorative:a,orientation:i=n,...d}=e,c=(r=i,o.includes(r))?i:n;return(0,s.jsx)(l.sG.div,{"data-orientation":c,...a?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:t})});i.displayName="Separator";var d=r(9434);let c=a.forwardRef((e,t)=>{let{className:r,orientation:a="horizontal",decorative:l=!0,...n}=e;return(0,s.jsx)(i,{ref:t,decorative:l,orientation:a,className:(0,d.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",r),...n})});c.displayName=i.displayName},9233:(e,t,r)=>{"use strict";r.d(t,{P:()=>a});var s=r(5476);function a(e){return(0,s.a)(e).getDay()}},9340:(e,t,r)=>{"use strict";r.d(t,{r:()=>a});var s=r(644);function a(e,t){return+(0,s.o)(e)==+(0,s.o)(t)}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var s=r(2596),a=r(9688);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,416,394,693,668,873,874,784,441,684,358],()=>t(3872)),_N_E=e.O()}]);