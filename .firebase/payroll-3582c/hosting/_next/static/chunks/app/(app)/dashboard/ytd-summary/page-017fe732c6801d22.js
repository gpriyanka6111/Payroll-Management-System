(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[153],{285:(e,r,s)=>{"use strict";s.d(r,{$:()=>i,r:()=>d});var t=s(5155),a=s(2115),l=s(9708),n=s(2085),o=s(9434);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=a.forwardRef((e,r)=>{let{className:s,variant:a,size:n,asChild:i=!1,...c}=e,m=i?l.DX:"button";return(0,t.jsx)(m,{className:(0,o.cn)(d({variant:a,size:n,className:s})),ref:r,...c})});i.displayName="Button"},490:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>G});var t=s(5155),a=s(2115),l=s(6695),n=s(5127),o=s(2543),d=s(8390),i=s(1407),c=s(1784),m=s(285),u=s(6874),h=s.n(u),f=s(7600),x=s(5317),p=s(6104),y=s(8856),j=s(3478),N=s(9556),b=s(9434);let g=j.bL,v=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(j.q7,{ref:r,className:(0,b.cn)("border-b",s),...a})});v.displayName="AccordionItem";let w=a.forwardRef((e,r)=>{let{className:s,children:a,...l}=e;return(0,t.jsx)(j.Y9,{className:"flex",children:(0,t.jsxs)(j.l9,{ref:r,className:(0,b.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...l,children:[a,(0,t.jsx)(N.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});w.displayName=j.l9.displayName;let A=a.forwardRef((e,r)=>{let{className:s,children:a,...l}=e;return(0,t.jsx)(j.UC,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,t.jsx)("div",{className:(0,b.cn)("pb-4 pt-0",s),children:a})})});function G(){let{user:e}=(0,f.A)(),[r,s]=a.useState([]),[u,j]=a.useState(!0),[N,b]=a.useState({from:"",to:""});a.useEffect(()=>{let e=new Date,r=(0,i.D)(e);b({from:(0,c.GP)(r,"MMMM d, yyyy"),to:(0,c.GP)(e,"MMMM d, yyyy")})},[]),a.useEffect(()=>{e&&(async()=>{j(!0);let r=(0,x.rJ)(p.db,"users",e.uid,"employees"),t=(0,x.P)(r,(0,x.My)("firstName","asc")),a=(await (0,x.GG)(t)).docs.map(e=>({id:e.id,...e.data()})),l=(0,i.D)(new Date),n=(0,x.rJ)(p.db,"users",e.uid,"payrolls"),o=(0,x.P)(n,(0,x._M)("toDate",">=",(0,c.GP)(l,"yyyy-MM-dd")),(0,x.My)("toDate","asc")),d=(await (0,x.GG)(o)).docs.map(e=>e.data()),m={};a.forEach(e=>{m[e.id]={employeeId:e.id,employeeName:"".concat(e.firstName),totalGrossPay:0,totalGrossCheckAmount:0,totalGrossOtherAmount:0,payPeriods:[]}}),d.forEach(e=>{e.results.forEach(r=>{if(m[r.employeeId]){let s=r.grossCheckAmount||0,t=r.grossOtherAmount||0,a=s+t;m[r.employeeId].totalGrossPay+=a,m[r.employeeId].totalGrossCheckAmount+=s,m[r.employeeId].totalGrossOtherAmount+=t;let[l,n,o]=e.fromDate.split("-").map(Number),[d,i,u]=e.toDate.split("-").map(Number),h=new Date(l,n-1,o),f=new Date(d,i-1,u);m[r.employeeId].payPeriods.push({period:"".concat((0,c.GP)(h,"MM/dd/yy")," - ").concat((0,c.GP)(f,"MM/dd/yy")),grossPay:a,grossCheckAmount:s,grossOtherAmount:t})}})}),s(Object.values(m)),j(!1)})().catch(console.error)},[e]);let G=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),k=a.useMemo(()=>r.reduce((e,r)=>e+r.totalGrossPay,0),[r]),P=a.useMemo(()=>r.reduce((e,r)=>e+r.totalGrossCheckAmount,0),[r]),C=a.useMemo(()=>r.reduce((e,r)=>e+r.totalGrossOtherAmount,0),[r]);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(m.$,{variant:"outline",asChild:!0,className:"w-fit",children:(0,t.jsxs)(h(),{href:"/dashboard/manager",children:[(0,t.jsx)(o.A,{className:"mr-2 h-4 w-4"})," Back to Manager Dashboard"]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Year-to-Date Summary"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Review total gross pay for all employees for the current calendar year."})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center",children:[(0,t.jsx)(d.A,{className:"mr-2 h-5 w-5 text-muted-foreground"}),"YTD Earnings Summary"]}),(0,t.jsxs)(l.BT,{children:["Summary of total gross pay from finalized payrolls from ",(0,t.jsx)("span",{className:"font-semibold",children:N.from})," to ",(0,t.jsx)("span",{className:"font-semibold",children:N.to}),"."]})]}),(0,t.jsx)(l.Wu,{children:u?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.E,{className:"h-10 w-full"}),(0,t.jsx)(y.E,{className:"h-10 w-full"}),(0,t.jsx)(y.E,{className:"h-10 w-full"})]}):r.length>0?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(n.XI,{children:[(0,t.jsx)(n.A0,{children:(0,t.jsxs)(n.Hj,{children:[(0,t.jsx)(n.nd,{children:"Employee"}),(0,t.jsx)(n.nd,{className:"text-right",children:"Gross Check Amount"}),(0,t.jsx)(n.nd,{className:"text-right",children:"Gross Other Amount"}),(0,t.jsx)(n.nd,{className:"text-right font-bold",children:"Total Gross Pay"})]})}),(0,t.jsx)(n.BF,{children:r.map(e=>(0,t.jsx)(g,{type:"single",collapsible:!0,className:"w-full",asChild:!0,children:(0,t.jsx)(n.Hj,{children:(0,t.jsx)(n.nA,{colSpan:4,className:"p-0",children:(0,t.jsxs)(v,{value:e.employeeId,className:"border-b-0",children:[(0,t.jsx)(w,{className:"hover:no-underline px-4 py-2",children:(0,t.jsxs)("div",{className:"flex justify-between w-full",children:[(0,t.jsx)("span",{className:"font-medium",children:e.employeeName}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-x-4 w-3/4 text-right tabular-nums",children:[(0,t.jsx)("span",{children:G(e.totalGrossCheckAmount)}),(0,t.jsx)("span",{children:G(e.totalGrossOtherAmount)}),(0,t.jsx)("span",{className:"font-bold",children:G(e.totalGrossPay)})]})]})}),(0,t.jsx)(A,{children:(0,t.jsx)("div",{className:"bg-muted/50 p-4",children:(0,t.jsxs)(n.XI,{children:[(0,t.jsx)(n.A0,{children:(0,t.jsxs)(n.Hj,{children:[(0,t.jsx)(n.nd,{children:"Pay Period"}),(0,t.jsx)(n.nd,{className:"text-right",children:"Gross Check"}),(0,t.jsx)(n.nd,{className:"text-right",children:"Gross Other"}),(0,t.jsx)(n.nd,{className:"text-right",children:"Gross Pay"})]})}),(0,t.jsx)(n.BF,{children:e.payPeriods.map((e,r)=>(0,t.jsxs)(n.Hj,{children:[(0,t.jsx)(n.nA,{children:e.period}),(0,t.jsx)(n.nA,{className:"text-right tabular-nums",children:G(e.grossCheckAmount)}),(0,t.jsx)(n.nA,{className:"text-right tabular-nums",children:G(e.grossOtherAmount)}),(0,t.jsx)(n.nA,{className:"text-right tabular-nums",children:G(e.grossPay)})]},r))})]})})})]})})})},e.employeeId))}),(0,t.jsx)(n.Gg,{children:(0,t.jsxs)(n.Hj,{className:"bg-muted/50 hover:bg-muted/50",children:[(0,t.jsx)(n.nA,{className:"font-bold text-lg",children:"Total"}),(0,t.jsx)(n.nA,{className:"text-right font-bold text-lg tabular-nums",children:G(P)}),(0,t.jsx)(n.nA,{className:"text-right font-bold text-lg tabular-nums",children:G(C)}),(0,t.jsx)(n.nA,{className:"text-right font-bold text-lg tabular-nums",children:G(k)})]})})]})}):(0,t.jsx)("div",{className:"h-24 text-center flex items-center justify-center text-muted-foreground",children:"No earnings data found for this year."})})]})]})}A.displayName=j.UC.displayName},512:(e,r,s)=>{Promise.resolve().then(s.bind(s,490))},5127:(e,r,s)=>{"use strict";s.d(r,{A0:()=>o,BF:()=>d,Gg:()=>i,Hj:()=>c,XI:()=>n,nA:()=>u,nd:()=>m,r6:()=>h});var t=s(5155),a=s(2115),l=s(9434);let n=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:r,className:(0,l.cn)("w-full caption-bottom text-sm",s),...a})})});n.displayName="Table";let o=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("thead",{ref:r,className:(0,l.cn)("[&_tr]:border-b",s),...a})});o.displayName="TableHeader";let d=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("tbody",{ref:r,className:(0,l.cn)("[&_tr:last-child]:border-0",s),...a})});d.displayName="TableBody";let i=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("tfoot",{ref:r,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a})});i.displayName="TableFooter";let c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("tr",{ref:r,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...a})});c.displayName="TableRow";let m=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("th",{ref:r,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...a})});m.displayName="TableHead";let u=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("td",{ref:r,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...a})});u.displayName="TableCell";let h=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("caption",{ref:r,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",s),...a})});h.displayName="TableCaption"},6104:(e,r,s)=>{"use strict";let t,a,l;s.d(r,{db:()=>l,j2:()=>a});var n=s(3915),o=s(3004),d=s(5317);try{t=(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)({apiKey:"AIzaSyAkP18VtzDihlYGJYJoNsH48v83yHobkds",authDomain:"payroll-3582c.firebaseapp.com",projectId:"payroll-3582c",storageBucket:"payroll-3582c.firebasestorage.app",messagingSenderId:"595764753966",appId:"1:595764753966:web:33c2371bf504e8985e91bf",measurementId:"G-9TSQDML6N1"}),a=(0,o.xI)(t),l=(0,d.aU)(t)}catch(e){throw console.error("Firebase initialization error",e),Error("Failed to initialize Firebase. Please check your .env.local file and restart the server.")}},6695:(e,r,s)=>{"use strict";s.d(r,{BT:()=>i,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>o,wL:()=>m});var t=s(5155),a=s(2115),l=s(9434);let n=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});n.displayName="Card";let o=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...a})});o.displayName="CardHeader";let d=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});d.displayName="CardTitle";let i=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",s),...a})});i.displayName="CardDescription";let c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent";let m=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",s),...a})});m.displayName="CardFooter"},7600:(e,r,s)=>{"use strict";s.d(r,{A:()=>c,AuthProvider:()=>i});var t=s(5155),a=s(2115),l=s(3004),n=s(6104),o=s(8856);let d=a.createContext(void 0);function i(e){let{children:r}=e,[s,i]=a.useState(null),[c,m]=a.useState(!0);return(a.useEffect(()=>{let e=(0,l.hg)(n.j2,e=>{i(e),m(!1)},e=>{console.error("Auth state change error:",e),m(!1)});return()=>e()},[]),c)?(0,t.jsx)("div",{className:"flex h-screen w-screen items-center justify-center",children:(0,t.jsxs)("div",{className:"w-1/2 space-y-4",children:[(0,t.jsx)(o.E,{className:"h-12 w-full"}),(0,t.jsx)(o.E,{className:"h-32 w-full"}),(0,t.jsx)(o.E,{className:"h-32 w-full"})]})}):(0,t.jsx)(d.Provider,{value:{user:s,loading:c},children:r})}function c(){let e=a.useContext(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8856:(e,r,s)=>{"use strict";s.d(r,{E:()=>l});var t=s(5155),a=s(9434);function l(e){let{className:r,...s}=e;return(0,t.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",r),...s})}},9434:(e,r,s)=>{"use strict";s.d(r,{cn:()=>l});var t=s(2596),a=s(9688);function l(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,a.QP)((0,t.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[992,416,668,873,874,784,962,441,684,358],()=>r(512)),_N_E=e.O()}]);