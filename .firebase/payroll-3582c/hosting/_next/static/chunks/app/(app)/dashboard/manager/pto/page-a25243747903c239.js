(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4862],{3638:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(40157).A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},27600:(e,s,t)=>{"use strict";t.d(s,{A:()=>o,AuthProvider:()=>c});var a=t(95155),r=t(12115),l=t(93004),n=t(56104),d=t(68856);let i=r.createContext(void 0);function c(e){let{children:s}=e,[t,c]=r.useState(null),[o,u]=r.useState(!0);return(r.useEffect(()=>{let e=(0,l.hg)(n.j2,e=>{c(e),u(!1)},e=>{console.error("Auth state change error:",e),u(!1)});return()=>e()},[]),o)?(0,a.jsx)("div",{className:"flex h-screen w-screen items-center justify-center",children:(0,a.jsxs)("div",{className:"w-1/2 space-y-4",children:[(0,a.jsx)(d.E,{className:"h-12 w-full"}),(0,a.jsx)(d.E,{className:"h-32 w-full"}),(0,a.jsx)(d.E,{className:"h-32 w-full"})]})}):(0,a.jsx)(i.Provider,{value:{user:t,loading:o},children:s})}function o(){let e=r.useContext(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},27876:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var a=t(95155),r=t(12115),l=t(66695),n=t(85127),d=t(40157);let i=(0,d.A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var c=t(3638);let o=(0,d.A)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);var u=t(41784),m=t(1407),h=t(30285),x=t(27600),f=t(35317),v=t(56104),p=t(68856);function j(){let{user:e}=(0,x.A)(),[s,t]=r.useState([]),[d,j]=r.useState([]),[y,N]=r.useState(!0),[b,g]=r.useState("");r.useEffect(()=>{g((0,u.GP)(new Date,"MMMM d, yyyy"))},[]),r.useEffect(()=>{e&&(async()=>{N(!0);let s=(0,f.rJ)(v.db,"users",e.uid,"employees"),a=(0,f.P)(s,(0,f.My)("firstName","asc"));t((await (0,f.GG)(a)).docs.map(e=>({id:e.id,...e.data()})));let r=(0,m.D)(new Date),l=(0,f.rJ)(v.db,"users",e.uid,"payrolls"),n=(0,f.P)(l,(0,f._M)("toDate",">=",(0,u.GP)(r,"yyyy-MM-dd")),(0,f.My)("toDate","desc")),d=(await (0,f.GG)(n)).docs.map(e=>e.data()),i=[];d.forEach(e=>{e.inputs.forEach(s=>{var t,a,r,l,n,d;((null!=(t=s.vdHoursUsed)?t:0)>0||(null!=(a=s.hdHoursUsed)?a:0)>0||(null!=(r=s.sdHoursUsed)?r:0)>0)&&i.push({employeeId:s.employeeId,employeeName:s.name,payPeriod:e.toDate,vdHoursUsed:null!=(l=s.vdHoursUsed)?l:0,hdHoursUsed:null!=(n=s.hdHoursUsed)?n:0,sdHoursUsed:null!=(d=s.sdHoursUsed)?d:0})})}),j(i),N(!1)})().catch(console.error)},[e]);let w=s.map(e=>{let s=d.filter(s=>s.employeeId===e.id).reduce((e,s)=>(e.vacation+=s.vdHoursUsed,e.holiday+=s.hdHoursUsed,e.sick+=s.sdHoursUsed,e),{vacation:0,holiday:0,sick:0}),t={vacation:e.vacationBalance,holiday:e.holidayBalance,sick:e.sickDayBalance},a={vacation:(t.vacation||0)+s.vacation,holiday:(t.holiday||0)+s.holiday,sick:(t.sick||0)+s.sick};return{...e,initialBalance:a,usedYTD:s,remainingBalance:t}}),H=e=>"number"!=typeof e||isNaN(e)?"0.00":e.toFixed(2),A=e=>{let[s,t,a]=e.split("-").map(Number),r=new Date(s,t-1,a);return(0,u.GP)(r,"MMMM d, yyyy")};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"PTO Tracker"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Review employee Paid Time Off balances from live payroll data."})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsxs)(l.ZB,{className:"flex items-center",children:[(0,a.jsx)(i,{className:"mr-2 h-5 w-5 text-muted-foreground"}),"Leave Balance Summary"]}),(0,a.jsxs)(l.BT,{children:["An overview of current leave balances for all employees as of ",b,"."]})]}),(0,a.jsx)(l.Wu,{children:y?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.E,{className:"h-10 w-full"}),(0,a.jsx)(p.E,{className:"h-10 w-full"})]}):(0,a.jsxs)(n.XI,{children:[(0,a.jsxs)(n.A0,{children:[(0,a.jsxs)(n.Hj,{children:[(0,a.jsx)(n.nd,{rowSpan:2,className:"align-bottom",children:"Employee"}),(0,a.jsx)(n.nd,{colSpan:3,className:"text-center border-b",children:"Initial Balance (YTD)"}),(0,a.jsx)(n.nd,{colSpan:3,className:"text-center border-b",children:"Used (YTD)"}),(0,a.jsx)(n.nd,{colSpan:3,className:"text-center border-b",children:"Remaining Balance"})]}),(0,a.jsxs)(n.Hj,{children:[(0,a.jsx)(n.nd,{className:"text-right text-xs",children:"VD"}),(0,a.jsx)(n.nd,{className:"text-right text-xs",children:"HD"}),(0,a.jsx)(n.nd,{className:"text-right text-xs",children:"SD"}),(0,a.jsx)(n.nd,{className:"text-right text-xs",children:"VD"}),(0,a.jsx)(n.nd,{className:"text-right text-xs",children:"HD"}),(0,a.jsx)(n.nd,{className:"text-right text-xs",children:"SD"}),(0,a.jsx)(n.nd,{className:"text-right text-xs font-semibold",children:"VD"}),(0,a.jsx)(n.nd,{className:"text-right text-xs font-semibold",children:"HD"}),(0,a.jsx)(n.nd,{className:"text-right text-xs font-semibold",children:"SD"})]})]}),(0,a.jsxs)(n.BF,{children:[w.map(e=>(0,a.jsxs)(n.Hj,{children:[(0,a.jsx)(n.nA,{className:"font-medium",children:e.firstName}),(0,a.jsx)(n.nA,{className:"text-right tabular-nums",children:H(e.initialBalance.vacation)}),(0,a.jsx)(n.nA,{className:"text-right tabular-nums",children:H(e.initialBalance.holiday)}),(0,a.jsx)(n.nA,{className:"text-right tabular-nums",children:H(e.initialBalance.sick)}),(0,a.jsxs)(n.nA,{className:"text-right tabular-nums text-destructive",children:["(",H(e.usedYTD.vacation),")"]}),(0,a.jsxs)(n.nA,{className:"text-right tabular-nums text-destructive",children:["(",H(e.usedYTD.holiday),")"]}),(0,a.jsxs)(n.nA,{className:"text-right tabular-nums text-destructive",children:["(",H(e.usedYTD.sick),")"]}),(0,a.jsx)(n.nA,{className:"text-right font-semibold tabular-nums",children:H(e.remainingBalance.vacation)}),(0,a.jsx)(n.nA,{className:"text-right font-semibold tabular-nums",children:H(e.remainingBalance.holiday)}),(0,a.jsx)(n.nA,{className:"text-right font-semibold tabular-nums",children:H(e.remainingBalance.sick)})]},e.id)),0===w.length&&!y&&(0,a.jsx)(n.Hj,{children:(0,a.jsx)(n.nA,{colSpan:10,className:"h-24 text-center text-muted-foreground",children:"No employee data found."})})]})]})})]}),(0,a.jsxs)(l.Zp,{className:"printable-section",children:[(0,a.jsxs)(l.aR,{className:"flex flex-row justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(l.ZB,{className:"flex items-center",children:[(0,a.jsx)(c.A,{className:"mr-2 h-5 w-5 text-muted-foreground"}),"Detailed Leave Log"]}),(0,a.jsx)(l.BT,{children:"A complete log of all leave hours used during payroll runs."})]}),(0,a.jsx)("div",{className:"print-action-button-container",children:(0,a.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>window.print(),children:[(0,a.jsx)(o,{className:"mr-2 h-4 w-4"})," Print Log"]})})]}),(0,a.jsx)(l.Wu,{children:y?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.E,{className:"h-10 w-full"}),(0,a.jsx)(p.E,{className:"h-10 w-full"})]}):(0,a.jsxs)(n.XI,{children:[(0,a.jsx)(n.A0,{children:(0,a.jsxs)(n.Hj,{children:[(0,a.jsx)(n.nd,{children:"Employee"}),(0,a.jsx)(n.nd,{children:"Pay Period End Date"}),(0,a.jsx)(n.nd,{className:"text-right",children:"VD Hours Used"}),(0,a.jsx)(n.nd,{className:"text-right",children:"HD Hours Used"}),(0,a.jsx)(n.nd,{className:"text-right",children:"SD Hours Used"})]})}),(0,a.jsxs)(n.BF,{children:[d.map((e,s)=>(0,a.jsxs)(n.Hj,{children:[(0,a.jsx)(n.nA,{className:"font-medium",children:e.employeeName}),(0,a.jsx)(n.nA,{children:A(e.payPeriod)}),(0,a.jsx)(n.nA,{className:"text-right tabular-nums",children:e.vdHoursUsed>0?"(".concat(H(e.vdHoursUsed),")"):"-"}),(0,a.jsx)(n.nA,{className:"text-right tabular-nums",children:e.hdHoursUsed>0?"(".concat(H(e.hdHoursUsed),")"):"-"}),(0,a.jsx)(n.nA,{className:"text-right tabular-nums",children:e.sdHoursUsed>0?"(".concat(H(e.sdHoursUsed),")"):"-"})]},"".concat(e.employeeId,"-").concat(e.payPeriod,"-").concat(s))),0===d.length&&!y&&(0,a.jsx)(n.Hj,{children:(0,a.jsx)(n.nA,{colSpan:5,className:"h-24 text-center text-muted-foreground",children:"No leave usage history found for this year."})})]})]})})]})]})}},30285:(e,s,t)=>{"use strict";t.d(s,{$:()=>c,r:()=>i});var a=t(95155),r=t(12115),l=t(99708),n=t(74466),d=t(59434);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,s)=>{let{className:t,variant:r,size:n,asChild:c=!1,...o}=e,u=c?l.DX:"button";return(0,a.jsx)(u,{className:(0,d.cn)(i({variant:r,size:n,className:t})),ref:s,...o})});c.displayName="Button"},56104:(e,s,t)=>{"use strict";let a,r,l;t.d(s,{db:()=>l,j2:()=>r});var n=t(23915),d=t(93004),i=t(35317);try{a=(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)({apiKey:"AIzaSyAkP18VtzDihlYGJYJoNsH48v83yHobkds",authDomain:"payroll-3582c.firebaseapp.com",projectId:"payroll-3582c",storageBucket:"payroll-3582c.firebasestorage.app",messagingSenderId:"595764753966",appId:"1:595764753966:web:33c2371bf504e8985e91bf",measurementId:"G-9TSQDML6N1"}),r=(0,d.xI)(a),l=(0,i.aU)(a)}catch(e){throw console.error("Firebase initialization error",e),Error("Failed to initialize Firebase. Please check your .env.local file and restart the server.")}},59191:(e,s,t)=>{Promise.resolve().then(t.bind(t,27876))},59434:(e,s,t)=>{"use strict";t.d(s,{cn:()=>l});var a=t(52596),r=t(39688);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},66695:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>i,Zp:()=>n,aR:()=>d,wL:()=>u});var a=t(95155),r=t(12115),l=t(59434);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});n.displayName="Card";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...r})});d.displayName="CardHeader";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});i.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent";let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...r})});u.displayName="CardFooter"},68856:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var a=t(95155),r=t(59434);function l(e){let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",s),...t})}},74466:(e,s,t)=>{"use strict";t.d(s,{F:()=>n});var a=t(52596);let r=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=a.$,n=(e,s)=>t=>{var a;if((null==s?void 0:s.variants)==null)return l(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:n,defaultVariants:d}=s,i=Object.keys(n).map(e=>{let s=null==t?void 0:t[e],a=null==d?void 0:d[e];if(null===s)return null;let l=r(s)||r(a);return n[e][l]}),c=t&&Object.entries(t).reduce((e,s)=>{let[t,a]=s;return void 0===a||(e[t]=a),e},{});return l(e,i,null==s||null==(a=s.compoundVariants)?void 0:a.reduce((e,s)=>{let{class:t,className:a,...r}=s;return Object.entries(r).every(e=>{let[s,t]=e;return Array.isArray(t)?t.includes({...d,...c}[s]):({...d,...c})[s]===t})?[...e,t,a]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}},85127:(e,s,t)=>{"use strict";t.d(s,{A0:()=>d,BF:()=>i,Gg:()=>c,Hj:()=>o,XI:()=>n,nA:()=>m,nd:()=>u,r6:()=>h});var a=t(95155),r=t(12115),l=t(59434);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,l.cn)("w-full caption-bottom text-sm",t),...r})})});n.displayName="Table";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("thead",{ref:s,className:(0,l.cn)("[&_tr]:border-b",t),...r})});d.displayName="TableHeader";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,l.cn)("[&_tr:last-child]:border-0",t),...r})});i.displayName="TableBody";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r})});c.displayName="TableFooter";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tr",{ref:s,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r})});o.displayName="TableRow";let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("th",{ref:s,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r})});u.displayName="TableHead";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("td",{ref:s,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r})});m.displayName="TableCell";let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("caption",{ref:s,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",t),...r})});h.displayName="TableCaption"}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,7416,3796,3873,1784,8441,1684,7358],()=>s(59191)),_N_E=e.O()}]);