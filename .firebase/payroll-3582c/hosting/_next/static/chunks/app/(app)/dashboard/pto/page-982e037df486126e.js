(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{285:(e,r,t)=>{"use strict";t.d(r,{$:()=>c,r:()=>i});var a=t(5155),s=t(2115),l=t(9708),n=t(2085),d=t(9434);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,r)=>{let{className:t,variant:s,size:n,asChild:c=!1,...o}=e,u=c?l.DX:"button";return(0,a.jsx)(u,{className:(0,d.cn)(i({variant:s,size:n,className:t})),ref:r,...o})});c.displayName="Button"},2543:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(157).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3638:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(157).A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},5127:(e,r,t)=>{"use strict";t.d(r,{A0:()=>d,BF:()=>i,Gg:()=>c,Hj:()=>o,XI:()=>n,nA:()=>m,nd:()=>u,r6:()=>h});var a=t(5155),s=t(2115),l=t(9434);let n=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:r,className:(0,l.cn)("w-full caption-bottom text-sm",t),...s})})});n.displayName="Table";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("thead",{ref:r,className:(0,l.cn)("[&_tr]:border-b",t),...s})});d.displayName="TableHeader";let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("tbody",{ref:r,className:(0,l.cn)("[&_tr:last-child]:border-0",t),...s})});i.displayName="TableBody";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("tfoot",{ref:r,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s})});c.displayName="TableFooter";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("tr",{ref:r,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s})});o.displayName="TableRow";let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("th",{ref:r,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s})});u.displayName="TableHead";let m=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("td",{ref:r,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s})});m.displayName="TableCell";let h=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("caption",{ref:r,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",t),...s})});h.displayName="TableCaption"},6104:(e,r,t)=>{"use strict";let a,s,l;t.d(r,{db:()=>l,j2:()=>s});var n=t(3915),d=t(3004),i=t(5317);try{a=(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)({apiKey:"AIzaSyAkP18VtzDihlYGJYJoNsH48v83yHobkds",authDomain:"payroll-3582c.firebaseapp.com",projectId:"payroll-3582c",storageBucket:"payroll-3582c.firebasestorage.app",messagingSenderId:"595764753966",appId:"1:595764753966:web:33c2371bf504e8985e91bf",measurementId:"G-9TSQDML6N1"}),s=(0,d.xI)(a),l=(0,i.aU)(a)}catch(e){throw console.error("Firebase initialization error",e),Error("Failed to initialize Firebase. Please check your .env.local file and restart the server.")}},6161:(e,r,t)=>{Promise.resolve().then(t.bind(t,9179))},6695:(e,r,t)=>{"use strict";t.d(r,{BT:()=>c,Wu:()=>o,ZB:()=>i,Zp:()=>n,aR:()=>d,wL:()=>u});var a=t(5155),s=t(2115),l=t(9434);let n=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});n.displayName="Card";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...s})});d.displayName="CardHeader";let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});i.displayName="CardTitle";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",t),...s})});c.displayName="CardDescription";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",t),...s})});o.displayName="CardContent";let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",t),...s})});u.displayName="CardFooter"},7600:(e,r,t)=>{"use strict";t.d(r,{A:()=>o,AuthProvider:()=>c});var a=t(5155),s=t(2115),l=t(3004),n=t(6104),d=t(8856);let i=s.createContext(void 0);function c(e){let{children:r}=e,[t,c]=s.useState(null),[o,u]=s.useState(!0);return(s.useEffect(()=>{let e=(0,l.hg)(n.j2,e=>{c(e),u(!1)},e=>{console.error("Auth state change error:",e),u(!1)});return()=>e()},[]),o)?(0,a.jsx)("div",{className:"flex h-screen w-screen items-center justify-center",children:(0,a.jsxs)("div",{className:"w-1/2 space-y-4",children:[(0,a.jsx)(d.E,{className:"h-12 w-full"}),(0,a.jsx)(d.E,{className:"h-32 w-full"}),(0,a.jsx)(d.E,{className:"h-32 w-full"})]})}):(0,a.jsx)(i.Provider,{value:{user:t,loading:o},children:r})}function o(){let e=s.useContext(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8856:(e,r,t)=>{"use strict";t.d(r,{E:()=>l});var a=t(5155),s=t(9434);function l(e){let{className:r,...t}=e;return(0,a.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",r),...t})}},9179:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>b});var a=t(5155),s=t(2115),l=t(6695),n=t(5127),d=t(2543),i=t(157);let c=(0,i.A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var o=t(3638);let u=(0,i.A)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);var m=t(1784),h=t(1407),f=t(285),x=t(6874),p=t.n(x),y=t(7600),j=t(5317),v=t(6104),N=t(8856);function b(){let{user:e}=(0,y.A)(),[r,t]=s.useState([]),[i,x]=s.useState([]),[b,g]=s.useState(!0),[w,A]=s.useState("");s.useEffect(()=>{A((0,m.GP)(new Date,"MMMM d, yyyy"))},[]),s.useEffect(()=>{e&&(async()=>{g(!0);let r=(0,j.rJ)(v.db,"users",e.uid,"employees"),a=(0,j.P)(r,(0,j.My)("firstName","asc"));t((await (0,j.GG)(a)).docs.map(e=>({id:e.id,...e.data()})));let s=(0,h.D)(new Date),l=(0,j.rJ)(v.db,"users",e.uid,"payrolls"),n=(0,j.P)(l,(0,j._M)("toDate",">=",(0,m.GP)(s,"yyyy-MM-dd")),(0,j.My)("toDate","desc")),d=(await (0,j.GG)(n)).docs.map(e=>e.data()),i=[];d.forEach(e=>{e.results.forEach(r=>{r.ptoUsed>0&&i.push({employeeId:r.employeeId,employeeName:r.name,payPeriod:e.toDate,ptoUsed:r.ptoUsed})})}),x(i),g(!1)})().catch(console.error)},[e]);let k=r.map(e=>{let r=i.filter(r=>r.employeeId===e.id).reduce((e,r)=>e+r.ptoUsed,0),t=e.ptoBalance;return{...e,initialBalance:t+r,usedYTD:r,remainingBalance:t}}),P=e=>"".concat(e.toFixed(2)),T=e=>{let[r,t,a]=e.split("-").map(Number),s=new Date(r,t-1,a);return(0,m.GP)(s,"MMMM d, yyyy")};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(f.$,{variant:"outline",asChild:!0,className:"w-fit",children:(0,a.jsxs)(p(),{href:"/dashboard/manager",children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"})," Back to Manager Dashboard"]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"PTO Tracker"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Review employee Paid Time Off balances from live payroll data."})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsxs)(l.ZB,{className:"flex items-center",children:[(0,a.jsx)(c,{className:"mr-2 h-5 w-5 text-muted-foreground"}),"PTO Balance Summary"]}),(0,a.jsxs)(l.BT,{children:["An overview of current PTO balances for all employees as of ",w,"."]})]}),(0,a.jsx)(l.Wu,{children:b?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(N.E,{className:"h-10 w-full"}),(0,a.jsx)(N.E,{className:"h-10 w-full"})]}):(0,a.jsxs)(n.XI,{children:[(0,a.jsx)(n.A0,{children:(0,a.jsxs)(n.Hj,{children:[(0,a.jsx)(n.nd,{children:"Employee"}),(0,a.jsx)(n.nd,{className:"text-right",children:"Initial Balance (YTD)"}),(0,a.jsx)(n.nd,{className:"text-right",children:"Used (YTD)"}),(0,a.jsx)(n.nd,{className:"text-right",children:"Remaining Balance"})]})}),(0,a.jsxs)(n.BF,{children:[k.map(e=>(0,a.jsxs)(n.Hj,{children:[(0,a.jsx)(n.nA,{className:"font-medium",children:e.firstName}),(0,a.jsx)(n.nA,{className:"text-right tabular-nums",children:P(e.initialBalance)}),(0,a.jsxs)(n.nA,{className:"text-right tabular-nums text-destructive",children:["(",P(e.usedYTD),")"]}),(0,a.jsx)(n.nA,{className:"text-right font-semibold tabular-nums",children:P(e.remainingBalance)})]},e.id)),0===k.length&&!b&&(0,a.jsx)(n.Hj,{children:(0,a.jsx)(n.nA,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No employee data found."})})]})]})})]}),(0,a.jsxs)(l.Zp,{className:"printable-section",children:[(0,a.jsxs)(l.aR,{className:"flex flex-row justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(l.ZB,{className:"flex items-center",children:[(0,a.jsx)(o.A,{className:"mr-2 h-5 w-5 text-muted-foreground"}),"Detailed PTO Log"]}),(0,a.jsx)(l.BT,{children:"A complete log of all PTO hours used during payroll runs."})]}),(0,a.jsx)("div",{className:"print-action-button-container",children:(0,a.jsxs)(f.$,{variant:"outline",size:"sm",onClick:()=>window.print(),children:[(0,a.jsx)(u,{className:"mr-2 h-4 w-4"})," Print Log"]})})]}),(0,a.jsx)(l.Wu,{children:b?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(N.E,{className:"h-10 w-full"}),(0,a.jsx)(N.E,{className:"h-10 w-full"})]}):(0,a.jsxs)(n.XI,{children:[(0,a.jsx)(n.A0,{children:(0,a.jsxs)(n.Hj,{children:[(0,a.jsx)(n.nd,{children:"Employee"}),(0,a.jsx)(n.nd,{children:"Pay Period End Date"}),(0,a.jsx)(n.nd,{className:"text-right",children:"Hours Used"})]})}),(0,a.jsxs)(n.BF,{children:[i.map((e,r)=>(0,a.jsxs)(n.Hj,{children:[(0,a.jsx)(n.nA,{className:"font-medium",children:e.employeeName}),(0,a.jsx)(n.nA,{children:T(e.payPeriod)}),(0,a.jsxs)(n.nA,{className:"text-right tabular-nums",children:["(",P(e.ptoUsed),")"]})]},"".concat(e.employeeId,"-").concat(e.payPeriod,"-").concat(r))),0===i.length&&!b&&(0,a.jsx)(n.Hj,{children:(0,a.jsx)(n.nA,{colSpan:3,className:"h-24 text-center text-muted-foreground",children:"No PTO usage history found."})})]})]})})]})]})}},9434:(e,r,t)=>{"use strict";t.d(r,{cn:()=>l});var a=t(2596),s=t(9688);function l(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[992,416,668,873,874,784,441,684,358],()=>r(6161)),_N_E=e.O()}]);