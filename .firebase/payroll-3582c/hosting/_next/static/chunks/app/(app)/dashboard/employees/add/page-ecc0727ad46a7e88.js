(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[742],{575:(e,s,a)=>{"use strict";a.d(s,{AddEmployeeForm:()=>k});var r=a(5155),l=a(2115),t=a(221),n=a(2177),i=a(5594),o=a(285),d=a(7759),c=a(2523),m=a(7481),h=a(5731),u=a(1554),p=a(9637),x=a(3896),j=a(9409),g=a(8539),y=a(7600),b=a(5695),v=a(5317),N=a(6104);let z=i.z.object({firstName:i.z.string().min(2,{message:"First name must be at least 2 characters."}).regex(/^[a-zA-Z' -]+$/,{message:"Name can only contain letters, spaces, hyphens, and apostrophes."}),lastName:i.z.string().min(2,{message:"Last name must be at least 2 characters."}).regex(/^[a-zA-Z' -]+$/,{message:"Name can only contain letters, spaces, hyphens, and apostrophes."}),ssn:i.z.string().regex(/^\d{3}-\d{2}-\d{4}$/,{message:"SSN must be in XXX-XX-XXXX format."}).optional().or(i.z.literal("")),email:i.z.string().email({message:"Invalid email address."}).optional().or(i.z.literal("")),mobileNumber:i.z.string().regex(/^\(\d{3}\) \d{3}-\d{4}$/,{message:"Number must be in (XXX) XXX-XXXX format."}).optional().or(i.z.literal("")),ptoBalance:i.z.coerce.number().min(0,{message:"PTO balance cannot be negative."}).default(0),comment:i.z.string().optional()}),X=z.extend({payMethod:i.z.literal("Hourly"),payRateCheck:i.z.coerce.number().positive({message:"Pay rate must be a positive number."}),payRateOthers:i.z.coerce.number().min(0,{message:"Pay rate cannot be negative"}).optional(),standardCheckHours:i.z.coerce.number().positive({message:"Standard hours must be positive."}),biWeeklySalary:i.z.coerce.number().optional()}),C=z.extend({payMethod:i.z.literal("Salaried"),biWeeklySalary:i.z.coerce.number().positive({message:"Bi-weekly salary must be a positive number."}),payRateCheck:i.z.coerce.number().optional(),payRateOthers:i.z.coerce.number().optional(),standardCheckHours:i.z.coerce.number().optional()}),f=i.z.discriminatedUnion("payMethod",[X,C]);function k(){let{toast:e}=(0,m.dj)(),{user:s}=(0,y.A)(),a=(0,b.useRouter)(),[i,z]=l.useState(!1),X=(0,n.mN)({resolver:(0,t.u)(f),defaultValues:{firstName:"",lastName:"",ssn:"",email:"",mobileNumber:"",payMethod:"Hourly",payRateCheck:0,payRateOthers:0,standardCheckHours:40,ptoBalance:0,comment:""},mode:"onChange"}),C=X.watch("payMethod");async function k(r){if(!s)return void e({title:"Not Authenticated",description:"You must be logged in to add an employee.",variant:"destructive"});z(!0);try{let l=(0,v.rJ)(N.db,"users",s.uid,"employees");await (0,v.gS)(l,r),e({title:"Employee Added",description:"".concat(r.firstName," ").concat(r.lastName," has been added successfully."),variant:"default"}),a.push("/dashboard/employees")}catch(s){console.error("Error adding employee: ",s),e({title:"Error",description:"Failed to add employee. Please try again.",variant:"destructive"})}finally{z(!1)}}let R=(e,s)=>{let a=e.target.value.replace(/-/g,"").replace(/\D/g,""),r="";a.length>0&&(r+=a.substring(0,3)),a.length>=4&&(r+="-"+a.substring(3,5)),a.length>=6&&(r+="-"+a.substring(5,9)),s(r)},M=(e,s)=>{let a=e.target.value.replace(/\D/g,"").substring(0,10),r="";a.length>0&&(r="(".concat(a.substring(0,3))),a.length>=4&&(r+=") ".concat(a.substring(3,6))),a.length>=7&&(r+="-".concat(a.substring(6,10))),s(r)};return(0,r.jsx)(d.lV,{...X,children:(0,r.jsxs)("form",{onSubmit:X.handleSubmit(k),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,r.jsx)(d.zB,{control:X.control,name:"firstName",render:e=>{let{field:s}=e;return(0,r.jsxs)(d.eI,{children:[(0,r.jsx)(d.lR,{children:"First Name *"}),(0,r.jsx)(d.MJ,{children:(0,r.jsx)(c.p,{placeholder:"e.g., Jane",...s,disabled:i})}),(0,r.jsx)(d.C5,{})]})}}),(0,r.jsx)(d.zB,{control:X.control,name:"lastName",render:e=>{let{field:s}=e;return(0,r.jsxs)(d.eI,{children:[(0,r.jsx)(d.lR,{children:"Last Name *"}),(0,r.jsx)(d.MJ,{children:(0,r.jsx)(c.p,{placeholder:"e.g., Doe",...s,disabled:i})}),(0,r.jsx)(d.C5,{})]})}})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,r.jsx)(d.zB,{control:X.control,name:"ssn",render:e=>{var s;let{field:a}=e;return(0,r.jsxs)(d.eI,{children:[(0,r.jsx)(d.lR,{children:"SSN (Optional)"}),(0,r.jsx)(d.MJ,{children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(h.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,r.jsx)(c.p,{type:"text",placeholder:"XXX-XX-XXXX",...a,onChange:e=>R(e,a.onChange),maxLength:11,value:null!=(s=a.value)?s:"",className:"pl-10",disabled:i})]})}),(0,r.jsx)(d.C5,{})]})}}),(0,r.jsx)(d.zB,{control:X.control,name:"mobileNumber",render:e=>{var s;let{field:a}=e;return(0,r.jsxs)(d.eI,{children:[(0,r.jsx)(d.lR,{children:"Mobile Number (Optional)"}),(0,r.jsx)(d.MJ,{children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,r.jsx)(c.p,{type:"tel",placeholder:"(XXX) XXX-XXXX",...a,onChange:e=>M(e,a.onChange),maxLength:14,value:null!=(s=a.value)?s:"",className:"pl-10",disabled:i})]})}),(0,r.jsx)(d.C5,{})]})}})]}),(0,r.jsx)(d.zB,{control:X.control,name:"email",render:e=>{var s;let{field:a}=e;return(0,r.jsxs)(d.eI,{children:[(0,r.jsx)(d.lR,{children:"Email (Optional)"}),(0,r.jsx)(d.MJ,{children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(p.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,r.jsx)(c.p,{type:"email",placeholder:"e.g., jane.doe@example.com",...a,value:null!=(s=a.value)?s:"",className:"pl-10",disabled:i})]})}),(0,r.jsx)(d.Rr,{children:"Used for sending payslips (if feature enabled)."}),(0,r.jsx)(d.C5,{})]})}}),(0,r.jsx)(d.zB,{control:X.control,name:"payMethod",render:e=>{let{field:s}=e;return(0,r.jsxs)(d.eI,{children:[(0,r.jsx)(d.lR,{children:"Pay Method *"}),(0,r.jsxs)(j.l6,{onValueChange:s.onChange,defaultValue:s.value,disabled:i,children:[(0,r.jsx)(d.MJ,{children:(0,r.jsx)(j.bq,{children:(0,r.jsx)(j.yv,{placeholder:"Select pay method"})})}),(0,r.jsxs)(j.gC,{children:[(0,r.jsx)(j.eb,{value:"Hourly",children:"Hourly"}),(0,r.jsx)(j.eb,{value:"Salaried",children:"Salaried"})]})]}),(0,r.jsx)(d.C5,{})]})}}),"Hourly"===C&&(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[(0,r.jsx)(d.zB,{control:X.control,name:"payRateCheck",render:e=>{let{field:s}=e;return(0,r.jsxs)(d.eI,{children:[(0,r.jsx)(d.lR,{children:"Hourly Rate Check ($) *"}),(0,r.jsx)(d.MJ,{children:(0,r.jsx)(c.p,{type:"number",step:"0.01",min:"0",placeholder:"e.g., 25.50",...s,disabled:i})}),(0,r.jsx)(d.C5,{})]})}}),(0,r.jsx)(d.zB,{control:X.control,name:"payRateOthers",render:e=>{let{field:s}=e;return(0,r.jsxs)(d.eI,{children:[(0,r.jsx)(d.lR,{children:"Hourly Rate Others ($)"}),(0,r.jsx)(d.MJ,{children:(0,r.jsx)(c.p,{type:"number",step:"0.01",min:"0",placeholder:"e.g., 15.00",...s,disabled:i})}),(0,r.jsx)(d.C5,{})]})}}),(0,r.jsx)(d.zB,{control:X.control,name:"standardCheckHours",render:e=>{let{field:s}=e;return(0,r.jsxs)(d.eI,{children:[(0,r.jsx)(d.lR,{children:"Standard Check Hours *"}),(0,r.jsx)(d.MJ,{children:(0,r.jsx)(c.p,{type:"number",step:"0.1",min:"0",placeholder:"e.g., 40",...s,disabled:i})}),(0,r.jsx)(d.C5,{})]})}})]}),"Salaried"===C&&(0,r.jsx)(d.zB,{control:X.control,name:"biWeeklySalary",render:e=>{let{field:s}=e;return(0,r.jsxs)(d.eI,{children:[(0,r.jsx)(d.lR,{children:"Bi-weekly Salary ($) *"}),(0,r.jsx)(d.MJ,{children:(0,r.jsx)(c.p,{type:"number",step:"0.01",min:"0",placeholder:"e.g., 2000.00",...s,disabled:i})}),(0,r.jsx)(d.C5,{})]})}}),(0,r.jsx)(d.zB,{control:X.control,name:"ptoBalance",render:e=>{let{field:s}=e;return(0,r.jsxs)(d.eI,{children:[(0,r.jsx)(d.lR,{children:"Initial PTO Balance (hours)"}),(0,r.jsx)(d.MJ,{children:(0,r.jsx)(c.p,{type:"number",step:"0.1",min:"0",placeholder:"e.g., 40",...s,disabled:i})}),(0,r.jsx)(d.C5,{})]})}}),(0,r.jsx)(d.zB,{control:X.control,name:"comment",render:e=>{let{field:s}=e;return(0,r.jsxs)(d.eI,{children:[(0,r.jsx)(d.lR,{children:"Comment"}),(0,r.jsx)(d.MJ,{children:(0,r.jsx)(g.T,{placeholder:"Enter any internal comments about the employee...",className:"resize-y",...s,disabled:i})}),(0,r.jsx)(d.Rr,{children:"This comment is for internal use and will be visible during payroll runs."}),(0,r.jsx)(d.C5,{})]})}}),(0,r.jsx)(o.$,{type:"submit",className:"w-full bg-accent text-accent-foreground hover:bg-accent/90",disabled:i,children:i?"Adding...":(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Add Employee"]})})]})})}},1554:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(157).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},3896:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(157).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},5695:(e,s,a)=>{"use strict";var r=a(8999);a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(s,{useSearchParams:function(){return r.useSearchParams}})},5731:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(157).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},9284:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,6874,23)),Promise.resolve().then(a.bind(a,575))},9637:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(157).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[992,416,668,873,874,263,152,521,886,930,441,684,358],()=>s(9284)),_N_E=e.O()}]);