(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{679:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]])},968:(e,t,a)=>{"use strict";a.d(t,{b:()=>i});var s=a(2115),l=a(3655),r=a(5155),n=s.forwardRef((e,t)=>(0,r.jsx)(l.sG.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var i=n},2383:()=>{},2991:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>X});var s=a(5155),l=a(2115),r=a(6695),n=a(285),i=a(1949),d=a(172),o=a(7223),c=a(286),m=a(5943),u=a(2543),h=a(1920),x=a(679),f=a(389),p=a(1784),y=a(9208),j=a(4861),g=a(831),v=a(8816),b=a(644),N=a(9340),w=a(5476),k=a(7600),C=a(5317),M=a(6104),A=a(7481),P=a(8856),S=a(4636),E=a(5511),I=a(9434),D=a(6874),O=a.n(D),_=a(4165),G=a(2523),T=a(5057),H=a(5365),L=a(9409),R=a(5349),z=a(3925),F=a(5127);function V(e){let{open:t,onOpenChange:a,onPinVerified:r}=e,[o,c]=l.useState(""),[m,u]=l.useState(""),[h,x]=l.useState(!1),{user:f}=(0,k.A)(),p=async()=>{if(!f)return void u("You must be logged in.");x(!0),u("");try{let e=(0,C.H9)(M.db,"users",f.uid),t=await (0,C.x7)(e);t.exists()&&t.data().securityPin===o||t.exists()&&!t.data().securityPin?r():u("Invalid PIN. Please try again.")}catch(e){u("An error occurred while verifying the PIN.")}finally{x(!1),c("")}};return(0,s.jsx)(_.lG,{open:t,onOpenChange:a,children:(0,s.jsxs)(_.Cf,{className:"sm:max-w-md",children:[(0,s.jsxs)(_.c7,{children:[(0,s.jsx)(_.L3,{children:"Enter Security PIN"}),(0,s.jsx)(_.rr,{children:"Enter your 4-digit PIN to modify this time entry."})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[m&&(0,s.jsxs)(H.Fc,{variant:"destructive",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)(H.XL,{children:"Error"}),(0,s.jsx)(H.TN,{children:m})]}),(0,s.jsx)(G.p,{type:"password",maxLength:4,placeholder:"••••",value:o,onChange:e=>{c(e.target.value.replace(/\D/g,""))},className:"text-center text-2xl tracking-[1rem]"}),(0,s.jsx)(n.$,{onClick:p,className:"w-full",disabled:h||4!==o.length,children:h?(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}):"Verify PIN"})]})]})})}let q=(e,t)=>{let a=e.target.value.replace(/[^0-9]/g,""),s=a;a.length>2&&(s="".concat(a.slice(0,2),":").concat(a.slice(2,4))),t(s)};function J(e){let{isOpen:t,onClose:a,employee:r,date:o,onSave:c}=e,{user:m}=(0,k.A)(),{toast:u}=(0,A.dj)(),[h,x]=l.useState(!1),[y,j]=l.useState(""),[g,v]=l.useState("09:00"),[b,N]=l.useState("AM"),[w,P]=l.useState("05:00"),[S,E]=l.useState("PM"),I=async()=>{if(!m||!r||!o)return;j("");let e=(0,f.qg)("".concat(g," ").concat(b),"hh:mm a",o),t=(0,f.qg)("".concat(w," ").concat(S),"hh:mm a",o);if(t<e)return void j("Clock-out time cannot be before clock-in time.");x(!0);try{let a=(0,C.rJ)(M.db,"users",m.uid,"employees",r.id,"timeEntries");await (0,C.gS)(a,{timeIn:C.Dc.fromDate(e),timeOut:C.Dc.fromDate(t),employeeId:r.id,employeeName:r.firstName}),u({title:"Success",description:"Time entry created successfully."}),c()}catch(e){console.error("Error creating time entry:",e),u({title:"Error",description:"Failed to create time entry.",variant:"destructive"})}finally{x(!1)}};return r&&o?(0,s.jsx)(_.lG,{open:t,onOpenChange:a,children:(0,s.jsxs)(_.Cf,{children:[(0,s.jsxs)(_.c7,{children:[(0,s.jsx)(_.L3,{children:"Add Time Entry"}),(0,s.jsxs)(_.rr,{children:["Create a new entry for ",r.firstName," on ",(0,p.GP)(o,"PPP"),"."]})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[y&&(0,s.jsxs)(H.Fc,{variant:"destructive",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)(H.XL,{children:y})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(T.J,{children:"Clock In"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(G.p,{value:g,onChange:e=>q(e,v),placeholder:"hh:mm"}),(0,s.jsxs)(L.l6,{value:b,onValueChange:e=>N(e),children:[(0,s.jsx)(L.bq,{children:(0,s.jsx)(L.yv,{})}),(0,s.jsxs)(L.gC,{children:[(0,s.jsx)(L.eb,{value:"AM",children:"AM"}),(0,s.jsx)(L.eb,{value:"PM",children:"PM"})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(T.J,{children:"Clock Out"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(G.p,{value:w,onChange:e=>q(e,P),placeholder:"hh:mm"}),(0,s.jsxs)(L.l6,{value:S,onValueChange:e=>E(e),children:[(0,s.jsx)(L.bq,{children:(0,s.jsx)(L.yv,{})}),(0,s.jsxs)(L.gC,{children:[(0,s.jsx)(L.eb,{value:"AM",children:"AM"}),(0,s.jsx)(L.eb,{value:"PM",children:"PM"})]})]})]})]})]})]}),(0,s.jsxs)(_.Es,{children:[(0,s.jsx)(n.$,{variant:"outline",onClick:a,children:"Cancel"}),(0,s.jsxs)(n.$,{onClick:I,disabled:h,children:[h&&(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"})," Save Entry"]})]})]})}):null}function $(e){let{isOpen:t,onClose:a,entry:r,date:c,onSave:m,onDeleteRequest:u}=e,{user:h}=(0,k.A)(),{toast:x}=(0,A.dj)(),[y,j]=l.useState(!1),[g,v]=l.useState(""),[b,N]=l.useState("09:00"),[w,P]=l.useState("AM"),[S,E]=l.useState("05:00"),[I,D]=l.useState("PM"),[O,R]=l.useState(!0);l.useEffect(()=>{if(r){let e=r.timeIn.toDate();if(N((0,p.GP)(e,"hh:mm")),P((0,p.GP)(e,"a")),r.timeOut){let e=r.timeOut.toDate();E((0,p.GP)(e,"hh:mm")),D((0,p.GP)(e,"a")),R(!0)}else R(!1),E("05:00"),D("PM")}},[r]);let z=async()=>{if(!h||!r||!c)return;v("");let e=(0,f.qg)("".concat(b," ").concat(w),"hh:mm a",c),t=null;if(O&&(t=(0,f.qg)("".concat(S," ").concat(I),"hh:mm a",c)),t&&t<e)return void v("Clock-out time cannot be before clock-in time.");j(!0);try{let a=(0,C.H9)(M.db,"users",h.uid,"employees",r.employeeId,"timeEntries",r.id);await (0,C.mZ)(a,{timeIn:C.Dc.fromDate(e),timeOut:t?C.Dc.fromDate(t):null}),x({title:"Success",description:"Time entry updated successfully."}),m()}catch(e){console.error("Error updating time entry:",e),x({title:"Error",description:"Failed to update time entry.",variant:"destructive"})}finally{j(!1)}};return r&&c?(0,s.jsx)(_.lG,{open:t,onOpenChange:a,children:(0,s.jsxs)(_.Cf,{children:[(0,s.jsxs)(_.c7,{children:[(0,s.jsx)(_.L3,{children:"Edit Time Entry"}),(0,s.jsxs)(_.rr,{children:["Adjust the clock-in/out times for ",(0,p.GP)(c,"PPP"),"."]})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[g&&(0,s.jsxs)(H.Fc,{variant:"destructive",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)(H.XL,{children:g})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(T.J,{children:"Clock In"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(G.p,{value:b,onChange:e=>q(e,N),placeholder:"hh:mm"}),(0,s.jsxs)(L.l6,{value:w,onValueChange:e=>P(e),children:[(0,s.jsx)(L.bq,{children:(0,s.jsx)(L.yv,{})}),(0,s.jsxs)(L.gC,{children:[(0,s.jsx)(L.eb,{value:"AM",children:"AM"}),(0,s.jsx)(L.eb,{value:"PM",children:"PM"})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(T.J,{children:"Clock Out"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(G.p,{value:S,onChange:e=>q(e,E),placeholder:"hh:mm",disabled:!O}),(0,s.jsxs)(L.l6,{value:I,onValueChange:e=>D(e),disabled:!O,children:[(0,s.jsx)(L.bq,{children:(0,s.jsx)(L.yv,{})}),(0,s.jsxs)(L.gC,{children:[(0,s.jsx)(L.eb,{value:"AM",children:"AM"}),(0,s.jsx)(L.eb,{value:"PM",children:"PM"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"isClockedOut",checked:!O,onChange:e=>R(!e.target.checked)}),(0,s.jsx)("label",{htmlFor:"isClockedOut",className:"text-xs font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Still clocked in?"})]})]})]})]}),(0,s.jsxs)(_.Es,{className:"justify-between",children:[(0,s.jsxs)(n.$,{variant:"destructive",onClick:()=>u(r),children:[(0,s.jsx)(o.A,{className:"mr-2 h-4 w-4"})," Delete Entry"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(n.$,{variant:"outline",onClick:a,children:"Cancel"}),(0,s.jsxs)(n.$,{onClick:z,disabled:y,children:[y&&(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"})," Save"]})]})]})]})}):null}function B(e){let{isOpen:t,onClose:a,date:l,summary:r,onEditRequest:i}=e;return l&&r?(0,s.jsx)(_.lG,{open:t,onOpenChange:a,children:(0,s.jsxs)(_.Cf,{className:"sm:max-w-lg",children:[(0,s.jsxs)(_.c7,{children:[(0,s.jsxs)(_.L3,{className:"flex items-center",children:[(0,s.jsx)(c.A,{className:"mr-2 h-5 w-5"})," Daily Activity Summary"]}),(0,s.jsxs)(_.rr,{children:[r.employeeName," on ",(0,p.GP)(l,"PPP"),"."]})]}),(0,s.jsx)("div",{className:"max-h-[60vh] overflow-y-auto",children:r.entries.length>0?(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("h4",{className:"font-semibold",children:["Total Hours: ",(0,s.jsx)("span",{className:"font-bold text-primary",children:r.totalHours.toFixed(2)})]}),(0,s.jsx)("ul",{className:"space-y-2 pl-4",children:r.entries.map(e=>{var t,a;return(0,s.jsxs)("li",{className:"text-sm list-disc list-inside flex items-center justify-between p-2 border rounded-md",children:[(0,s.jsxs)("span",{children:[(0,p.GP)(e.timeIn.toDate(),"p")," - ",e.timeOut?(0,p.GP)(e.timeOut.toDate(),"p"):"...",(0,s.jsxs)("span",{className:"ml-2 text-muted-foreground",children:["(",W(e.timeIn.toDate(),null!=(a=null==(t=e.timeOut)?void 0:t.toDate())?a:null),")"]})]}),(0,s.jsx)(n.$,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>i(e),children:(0,s.jsx)(m.A,{className:"h-3 w-3"})})]},e.id)})})]}):(0,s.jsx)("p",{className:"text-center text-muted-foreground py-10",children:"No activity was recorded for this day."})})]})}):null}let W=(e,t)=>{if(!t)return"Active";let a=(0,y.o)(t,e);if(a<0)return"0h 0m";let s=Math.floor(a/60);return"".concat(s,"h ").concat(a%60,"m")};function X(){var e,t,a,i;let{user:d}=(0,k.A)(),{toast:o}=(0,A.dj)(),[c,m]=l.useState([]),[D,_]=l.useState([]),[G,H]=l.useState(!0),[L,q]=l.useState(),[W,X]=l.useState(!1);l.useEffect(()=>{let e=localStorage.getItem("timesheetDateRange"),t=localStorage.getItem("lastPayrollEndDate");if(e){let{from:t,to:a,remembered:s}=JSON.parse(e),l=new Date(t),r=new Date(a);if((0,j.f)(l)&&(0,j.f)(r)&&s){q({from:l,to:r}),X(!0);return}}if(t){let e=new Date(t),a=(0,g.f)(e,1),s=(0,g.f)(a,13);q({from:a,to:s})}else q({from:(0,v.e)(new Date,13),to:new Date})},[]),l.useEffect(()=>{W&&(null==L?void 0:L.from)&&(null==L?void 0:L.to)?localStorage.setItem("timesheetDateRange",JSON.stringify({from:L.from,to:L.to,remembered:!0})):localStorage.removeItem("timesheetDateRange")},[L,W]);let[Z,U]=l.useState(!1),[Y,K]=l.useState({date:null,summary:null}),[Q,ee]=l.useState(!1),[et,ea]=l.useState(!1),[es,el]=l.useState(null),[er,en]=l.useState(!1),[ei,ed]=l.useState(null),[eo,ec]=l.useState(null),em=l.useCallback(async()=>{if(!d||!(null==L?void 0:L.from)||!(null==L?void 0:L.to)){_([]),H(!1);return}H(!0);try{let e=(0,C.rJ)(M.db,"users",d.uid,"employees"),t=(0,C.P)(e,(0,C.My)("firstName","asc")),a=(await (0,C.GG)(t)).docs.map(e=>({id:e.id,...e.data()}));m(a);let s=[],l=new Date(L.to);for(let e of(l.setHours(23,59,59,999),a)){let t=(0,C.rJ)(M.db,"users",d.uid,"employees",e.id,"timeEntries"),a=(0,C.P)(t,(0,C._M)("timeIn",">=",L.from),(0,C._M)("timeIn","<=",l),(0,C.My)("timeIn","desc")),r=(await (0,C.GG)(a)).docs.map(t=>({id:t.id,...t.data(),employeeId:e.id,employeeName:e.firstName})),n=new Map;r.forEach(e=>{let t=(0,p.GP)((0,b.o)(e.timeIn.toDate()),"yyyy-MM-dd"),a=n.get(t)||{totalMinutes:0,entries:[]};if(e.timeOut){let t=(0,y.o)(e.timeOut.toDate(),e.timeIn.toDate());a.totalMinutes+=t>0?t:0}a.entries.push(e),n.set(t,a)}),n.forEach((t,a)=>{s.push({employeeId:e.id,employeeName:e.firstName,date:(0,f.qg)(a,"yyyy-MM-dd",new Date),totalHours:t.totalMinutes/60,entries:t.entries.sort((e,t)=>e.timeIn.toDate().getTime()-t.timeIn.toDate().getTime())})})}_(s)}catch(e){console.error("Error fetching timesheets:",e),o({title:"Error",description:"Could not fetch timesheet data.",variant:"destructive"})}finally{H(!1)}},[d,L,o]);l.useEffect(()=>{em()},[em]);let eu=(e,t)=>{let a=D.find(a=>a.employeeId===e.id&&(0,N.r)(a.date,t));a?(K({date:a.date,summary:a}),U(!0)):(ec("add"),ed({employee:e,date:t}),ee(!0))},eh=async()=>{if(d&&es)try{let{entry:e}=es,t=(0,C.H9)(M.db,"users",d.uid,"employees",e.employeeId,"timeEntries",e.id);await (0,C.kd)(t),o({title:"Success",description:"Time entry deleted."}),ex()}catch(e){console.error("Error deleting entry:",e),o({title:"Error",description:"Failed to delete time entry.",variant:"destructive"})}},ex=()=>{ea(!1),el(null),ec(null),em()},ef=L&&L.from&&L.to?function(e,t){let a=(0,w.a)(e.start),s=(0,w.a)(e.end),l=+a>+s,r=l?+a:+s,n=l?s:a;n.setHours(0,0,0,0);let i=1;if(!i)return[];i<0&&(i=-i,l=!l);let d=[];for(;+n<=r;)d.push((0,w.a)(n)),n.setDate(n.getDate()+i),n.setHours(0,0,0,0);return l?d.reverse():d}({start:L.from,end:L.to}):[],ep=l.useMemo(()=>{let e=new Map;return c.forEach(t=>e.set(t.id,0)),D.forEach(t=>{let a=e.get(t.employeeId)||0;e.set(t.employeeId,a+t.totalHours)}),e},[c,D]);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(n.$,{variant:"outline",asChild:!0,className:"w-fit",children:(0,s.jsxs)(O(),{href:"/dashboard",children:[(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4"})," Back to Dashboard"]})}),(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Consolidated Timesheet"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Review total logged hours for all employees. Click on a cell to view or edit detailed punch entries."}),(0,s.jsxs)(r.Zp,{children:[(0,s.jsx)(r.aR,{children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(r.ZB,{children:"Time Log Summary"}),(0,s.jsx)(r.BT,{children:"Displaying time entries for the selected period."})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 w-full sm:w-auto items-center",children:[(0,s.jsxs)(S.AM,{children:[(0,s.jsx)(S.Wv,{asChild:!0,children:(0,s.jsxs)(n.$,{id:"date",variant:"outline",className:(0,I.cn)("w-full sm:w-[300px] justify-start text-left font-normal",!L&&"text-muted-foreground"),children:[(0,s.jsx)(h.A,{className:"mr-2 h-4 w-4"}),(null==L?void 0:L.from)?L.to?(0,s.jsxs)(s.Fragment,{children:[(0,p.GP)(L.from,"LLL dd, y")," -"," ",(0,p.GP)(L.to,"LLL dd, y")]}):(0,p.GP)(L.from,"LLL dd, y"):(0,s.jsx)("span",{children:"Pick a date"})]})}),(0,s.jsx)(S.hl,{className:"w-auto p-0",align:"end",children:(0,s.jsx)(E.V,{initialFocus:!0,mode:"range",defaultMonth:null==L?void 0:L.from,selected:L,onSelect:q,numberOfMonths:2})})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(R.S,{id:"remember-dates",checked:W,onCheckedChange:e=>X(!!e)}),(0,s.jsx)(T.J,{htmlFor:"remember-dates",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Remember these dates"})]}),(0,s.jsxs)(n.$,{variant:"outline",onClick:()=>{if(!c.length||!ef.length||!(null==L?void 0:L.from)||!L.to)return void o({title:"No Data",description:"There is no data to export.",variant:"destructive"});let e=z.Wp.book_new(),t=[],a=[],s=0,l=["Date","Metric",...c.map(e=>"".concat(e.firstName))];t.push(l),s++,ef.forEach(e=>{let l=D.filter(t=>(0,N.r)(t.date,e)),r=[(0,p.GP)(e,"eee, MMM dd"),"In:"];c.forEach(e=>{var t;let a=l.find(t=>t.employeeId===e.id),s=a?a.entries.length>1?"Multiple":(null==(t=a.entries[0])?void 0:t.timeIn)?(0,p.GP)(a.entries[0].timeIn.toDate(),"p"):"-":"-";r.push(s)}),t.push(r);let n=["","Out:"];c.forEach(e=>{var t,a;let s=l.find(t=>t.employeeId===e.id),r=s?s.entries.length>1?"Multiple":(null==(t=s.entries[0])?void 0:t.timeOut)?(0,p.GP)(s.entries[0].timeOut.toDate(),"p"):(null==(a=s.entries[0])?void 0:a.timeIn)?"ACTIVE":"-":"-";n.push(r)}),t.push(n);let i=["","Total:"];c.forEach(e=>{let t=l.find(t=>t.employeeId===e.id),a=t&&t.totalHours>0?"".concat(t.totalHours.toFixed(2)):"-";i.push(a)}),t.push(i),s>0&&a.push({s:{r:s,c:0},e:{r:s+2,c:0}}),s+=3});let r=["Total Hours","",...c.map(e=>(ep.get(e.id)||0).toFixed(2))];t.push(r);let n=z.Wp.aoa_to_sheet(t);n["!merges"]=a;let i=[{wch:15},{wch:8},...c.map(()=>({wch:20}))];n["!cols"]=i,z.Wp.book_append_sheet(e,n,"Timesheet");let d="timesheet (".concat((0,p.GP)(L.from,"yyyy-MM-dd")," to ").concat((0,p.GP)(L.to,"yyyy-MM-dd"),").xlsx");z._h(e,d)},children:[(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Export"]})]})]})}),(0,s.jsx)(r.Wu,{children:G?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(P.E,{className:"h-12 w-full"}),(0,s.jsx)(P.E,{className:"h-12 w-full"}),(0,s.jsx)(P.E,{className:"h-12 w-full"})]}):c.length>0?(0,s.jsx)("div",{className:"border rounded-lg max-h-[65vh] overflow-auto",children:(0,s.jsxs)(F.XI,{children:[(0,s.jsx)(F.A0,{children:(0,s.jsxs)(F.Hj,{children:[(0,s.jsx)(F.nd,{className:"w-[120px] font-bold sticky left-0 top-0 bg-card z-30",children:"Date"}),(0,s.jsx)(F.nd,{className:"w-[80px] font-bold sticky left-[120px] top-0 bg-card z-30",children:"Metric"}),c.map(e=>(0,s.jsx)(F.nd,{className:"font-bold sticky top-0 bg-card z-20 min-w-[150px] text-center",children:e.firstName},e.id))]})}),(0,s.jsxs)(F.BF,{children:[ef.map(e=>{let t=D.filter(t=>(0,N.r)(t.date,e));return(0,s.jsxs)(l.Fragment,{children:[(0,s.jsxs)(F.Hj,{children:[(0,s.jsx)(F.nA,{rowSpan:3,className:"font-medium align-top pt-3 border-b sticky left-0 bg-card z-20",children:(0,p.GP)(e,"eee, MMM dd")}),(0,s.jsx)(F.nA,{className:"font-semibold text-muted-foreground p-2 sticky left-[120px] bg-card z-20",children:"In:"}),c.map(a=>{var l;let r=t.find(e=>e.employeeId===a.id);return(0,s.jsx)(F.nA,{className:"text-center tabular-nums cursor-pointer p-2",onClick:()=>eu(a,e),children:r?r.entries.length>1?"Multiple":(null==(l=r.entries[0])?void 0:l.timeIn)?(0,p.GP)(r.entries[0].timeIn.toDate(),"p"):"-":"-"},"".concat(a.id,"-in"))})]}),(0,s.jsxs)(F.Hj,{children:[(0,s.jsx)(F.nA,{className:"font-semibold text-muted-foreground p-2 sticky left-[120px] bg-card z-20",children:"Out:"}),c.map(a=>{var l,r;let n=t.find(e=>e.employeeId===a.id);return(0,s.jsx)(F.nA,{className:"text-center tabular-nums cursor-pointer p-2",onClick:()=>eu(a,e),children:n?n.entries.length>1?"Multiple":(null==(l=n.entries[0])?void 0:l.timeOut)?(0,p.GP)(n.entries[0].timeOut.toDate(),"p"):(null==(r=n.entries[0])?void 0:r.timeIn)?(0,s.jsx)("span",{className:"text-accent font-semibold",children:"ACTIVE"}):"-":"-"},"".concat(a.id,"-out"))})]}),(0,s.jsxs)(F.Hj,{children:[(0,s.jsx)(F.nA,{className:"font-bold p-2 sticky left-[120px] bg-card z-20",children:"Total:"}),c.map(a=>{let l=t.find(e=>e.employeeId===a.id);return(0,s.jsx)(F.nA,{className:"text-center font-bold tabular-nums cursor-pointer p-2",onClick:()=>eu(a,e),children:l&&l.totalHours>0?"".concat(l.totalHours.toFixed(2)):"-"},"".concat(a.id,"-total"))})]})]},e.toISOString())}),(0,s.jsxs)(F.Hj,{children:[(0,s.jsx)(F.nA,{colSpan:2,className:"sticky bottom-0 left-0 bg-card z-30 font-bold p-2 text-right",children:"Total Hours"}),c.map(e=>(0,s.jsx)(F.nA,{className:"sticky bottom-0 bg-card z-20 font-bold text-primary tabular-nums p-2 text-center",children:(ep.get(e.id)||0).toFixed(2)},e.id))]})]})]})}):(0,s.jsx)("div",{className:"text-center py-10 text-muted-foreground",children:"No employees found. Add an employee to get started."})})]}),(0,s.jsx)(B,{isOpen:Z,onClose:()=>U(!1),date:Y.date,summary:Y.summary,onEditRequest:e=>{Y.date&&(ec("edit"),el({entry:e,date:Y.date}),ee(!0))}}),(0,s.jsx)(V,{open:Q,onOpenChange:ee,onPinVerified:()=>{ee(!1),"edit"===eo&&es?(U(!1),ea(!0)):"add"===eo&&ei?en(!0):"delete"===eo&&es&&eh()}}),(0,s.jsx)($,{isOpen:et,onClose:()=>ea(!1),entry:null!=(e=null==es?void 0:es.entry)?e:null,date:null!=(t=null==es?void 0:es.date)?t:null,onSave:ex,onDeleteRequest:e=>{ec("delete"),el({entry:e,date:new Date}),ee(!0)}}),(0,s.jsx)(J,{isOpen:er,onClose:()=>en(!1),employee:null!=(a=null==ei?void 0:ei.employee)?a:null,date:null!=(i=null==ei?void 0:ei.date)?i:null,onSave:()=>{en(!1),ed(null),ec(null),em()}})]})}},3686:()=>{},4165:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>u,Es:()=>x,L3:()=>f,c7:()=>h,lG:()=>d,rr:()=>p,zM:()=>o});var s=a(5155),l=a(2115),r=a(5452),n=a(5318),i=a(9434);let d=r.bL,o=r.l9,c=r.ZL;r.bm;let m=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});m.displayName=r.hJ.displayName;let u=l.forwardRef((e,t)=>{let{className:a,children:l,...d}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(m,{}),(0,s.jsxs)(r.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[l,(0,s.jsxs)(r.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(n.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=r.UC.displayName;let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};h.displayName="DialogHeader";let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="DialogFooter";let f=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});f.displayName=r.hE.displayName;let p=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...l})});p.displayName=r.VY.displayName},4636:(e,t,a)=>{"use strict";a.d(t,{AM:()=>i,Wv:()=>d,hl:()=>o});var s=a(5155),l=a(2115),r=a(547),n=a(9434);let i=r.bL,d=r.l9,o=l.forwardRef((e,t)=>{let{className:a,align:l="center",sideOffset:i=4,...d}=e;return(0,s.jsx)(r.ZL,{children:(0,s.jsx)(r.UC,{ref:t,align:l,sideOffset:i,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...d})})});o.displayName=r.UC.displayName},5127:(e,t,a)=>{"use strict";a.d(t,{A0:()=>i,BF:()=>d,Hj:()=>o,XI:()=>n,nA:()=>m,nd:()=>c,r6:()=>u});var s=a(5155),l=a(2115),r=a(9434);let n=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,r.cn)("w-full caption-bottom text-sm",a),...l})})});n.displayName="Table";let i=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("thead",{ref:t,className:(0,r.cn)("[&_tr]:border-b",a),...l})});i.displayName="TableHeader";let d=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,r.cn)("[&_tr:last-child]:border-0",a),...l})});d.displayName="TableBody",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...l})}).displayName="TableFooter";let o=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tr",{ref:t,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...l})});o.displayName="TableRow";let c=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("th",{ref:t,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...l})});c.displayName="TableHead";let m=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("td",{ref:t,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...l})});m.displayName="TableCell";let u=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("caption",{ref:t,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",a),...l})});u.displayName="TableCaption"},5318:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5511:(e,t,a)=>{"use strict";a.d(t,{V:()=>o});var s=a(5155);a(2115);var l=a(965),r=a(3158),n=a(6457),i=a(9434),d=a(285);function o(e){let{className:t,classNames:a,showOutsideDays:o=!0,...c}=e;return(0,s.jsx)(n.hv,{showOutsideDays:o,className:(0,i.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,d.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,d.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,s.jsx)(l.A,{className:(0,i.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,s.jsx)(r.A,{className:(0,i.cn)("h-4 w-4",t),...a})}},...c})}o.displayName="Calendar"},5943:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},7223:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},7600:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,AuthProvider:()=>o});var s=a(5155),l=a(2115),r=a(3004),n=a(6104),i=a(8856);let d=l.createContext(void 0);function o(e){let{children:t}=e,[a,o]=l.useState(null),[c,m]=l.useState(!0);return(l.useEffect(()=>{let e=(0,r.hg)(n.j2,e=>{o(e),m(!1)},e=>{console.error("Auth state change error:",e),m(!1)});return()=>e()},[]),c)?(0,s.jsx)("div",{className:"flex h-screen w-screen items-center justify-center",children:(0,s.jsxs)("div",{className:"w-1/2 space-y-4",children:[(0,s.jsx)(i.E,{className:"h-12 w-full"}),(0,s.jsx)(i.E,{className:"h-32 w-full"}),(0,s.jsx)(i.E,{className:"h-32 w-full"})]})}):(0,s.jsx)(d.Provider,{value:{user:a,loading:c},children:t})}function c(){let e=l.useContext(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8856:(e,t,a)=>{"use strict";a.d(t,{E:()=>r});var s=a(5155),l=a(9434);function r(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-muted",t),...a})}},9926:(e,t,a)=>{Promise.resolve().then(a.bind(a,2991))}},e=>{var t=t=>e(e.s=t);e.O(0,[992,416,524,668,873,874,263,152,784,886,452,31,890,548,441,684,358],()=>t(9926)),_N_E=e.O()}]);